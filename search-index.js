crystal_doc_search_index_callback({"repository_name":"money","body":"# money [![CI](https://github.com/crystal-money/money/actions/workflows/ci.yml/badge.svg)](https://github.com/crystal-money/money/actions/workflows/ci.yml) [![Releases](https://img.shields.io/github/release/crystal-money/money.svg)](https://github.com/crystal-money/money/releases) [![License](https://img.shields.io/github/license/crystal-money/money.svg)](https://github.com/crystal-money/money/blob/master/LICENSE)\n\n## Introduction\n\nA Crystal shard for dealing with money and currency conversion ported from [RubyMoney](https://github.com/RubyMoney/money).\n\n### Features\n\n- Provides a `Money` class which encapsulates all information about an certain\n  amount of money, such as its value and its currency.\n- Provides a `Money::Currency` class which encapsulates all information about\n  a monetary unit.\n- Represents monetary values as big decimals. This avoids floating point\n  rounding errors.\n- Represents currency as `Money::Currency` instances providing a high level of\n  flexibility.\n- Provides APIs for exchanging money from one currency to another.\n\n### Resources\n\n- [API Documentation](https://crystal-money.github.io/money/)\n- [Git Repository](https://github.com/crystal-money/money)\n\n### Notes\n\n- Your app must use UTF-8 to function with this library. There are a\n  number of non-ASCII currency attributes.\n- This app requires JSON.\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  money:\n    github: crystal-money/money\n```\n\nInstall with `shards install`.\n\n## Usage\n\n```crystal\nrequire \"money\"\n\n# 10.00 USD\nmoney = Money.new(1000, \"USD\")\nmoney.amount        # => 10.0\nmoney.fractional    # => 1000.0\nmoney.currency.code # => \"USD\"\n\n# Comparisons\nMoney.new(1000, \"USD\") == Money.new(1000, \"USD\") # => true\nMoney.new(1000, \"USD\") == Money.new(100,  \"USD\") # => false\nMoney.new(1000, \"USD\") == Money.new(1000, \"EUR\") # => false\nMoney.new(1000, \"USD\") != Money.new(1000, \"EUR\") # => true\n\n# Arithmetic\nMoney.new(1000, \"USD\") + Money.new(500, \"USD\") == Money.new(1500, \"USD\")\nMoney.new(1000, \"USD\") - Money.new(200, \"USD\") == Money.new(800,  \"USD\")\nMoney.new(1000, \"USD\") / 5                     == Money.new(200,  \"USD\")\nMoney.new(1000, \"USD\") * 5                     == Money.new(5000, \"USD\")\n\n# Unit to subunit conversions\nMoney.from_amount(5, \"USD\") == Money.new(500,  \"USD\") # 5 USD\nMoney.from_amount(5, \"JPY\") == Money.new(5,    \"JPY\") # 5 JPY\nMoney.from_amount(5, \"TND\") == Money.new(5000, \"TND\") # 5 TND\n\n# Currency conversions\nsome_code_to_setup_exchange_rates\nMoney.new(1000, \"USD\").exchange_to(\"EUR\") == Money.new(some_value, \"EUR\")\n\n# Formatting (see Formatting section for more options)\nMoney.new(100, \"USD\").format # => \"$1.00\"\nMoney.new(100, \"GBP\").format # => \"£1.00\"\nMoney.new(100, \"EUR\").format # => \"€1.00\"\n```\n\n## Infinite Precision\n\nBy default, `Money` objects are rounded to the nearest cent and the additional\nprecision is not preserved:\n\n```crystal\nMoney.new(2.34567).to_s # => \"$2.35\"\n```\n\nIf you wish to work with the additional precision, you can use either of the\nfollowing:\n\n```crystal\n# Set the value globally\nMoney.infinite_precision = true\n\nMoney.new(2.34567).to_s   # => \"$2.34567\"\n\n# or\n\n# Set the value within the block\nMoney.with_infinite_precision do\n  Money.new(2.34567).to_s # => \"$2.34567\"\nend\n```\n\n## Currency\n\nCurrencies are consistently represented as instances of `Money::Currency`.\nThe most part of `Money` APIs allows you to supply either a `String`, `Symbol`\nor a `Money::Currency`.\n\n```crystal\nMoney.new(1000, \"USD\") == Money.new(1000, Money::Currency.find(\"USD\"))\nMoney.new(1000, \"EUR\").currency == Money::Currency.find(:eur)\nMoney.new(1000, \"PLN\").currency == Money::Currency[:pln]\n```\n\nA `Money::Currency` instance holds all the information about the currency,\nincluding the currency symbol, name and much more.\n\n```crystal\ncurrency = Money.new(1000, \"USD\").currency\ncurrency.code # => \"USD\"\ncurrency.name # => \"United States Dollar\"\n```\n\nTo define a new `Money::Currency` use `Money::Currency.register` as shown\nbelow.\n\n```crystal\ncurrency = Money::Currency.new(\n  priority:            1,\n  code:                \"USD\",\n  iso_numeric:         840,\n  name:                \"United States Dollar\",\n  symbol:              \"$\",\n  symbol_first:        true,\n  subunit:             \"Cent\",\n  subunit_to_unit:     100,\n  decimal_mark:        \".\",\n  thousands_separator: \",\"\n)\n\nMoney::Currency.register(currency)\n```\n\nThe pre-defined set of attributes includes:\n\n- `:priority` a numerical value you can use to sort/group the currency list\n- `:code` the international 3-letter code as defined by the ISO 4217 standard\n- `:iso_numeric` the international 3-digit code as defined by the ISO 4217 standard\n- `:name` the currency name\n- `:symbol` the currency symbol (UTF-8 encoded)\n- `:symbol_first` whether a money symbol should go before the amount\n- `:subunit` the name of the fractional monetary unit\n- `:subunit_to_unit` the proportion between the unit and the subunit\n- `:decimal_mark` character between the whole and fraction amounts\n- `:thousands_separator` character between each thousands place\n\nAll attributes except `:code` and `:subunit_to_unit` are optional.\nSome attributes, such as `:symbol`, are used by the `Money` class to print out a\nrepresentation of the object. Other attributes, such as `:name` or `:priority`,\nexist to provide a basic API you can take advantage of to build your application.\n\n### :priority\n\nThe priority attribute is an arbitrary numerical value you can assign to the\n`Money::Currency` and use in sorting/grouping operation.\n\nFor instance, let's assume your web application needs to render a currency\nselector like the one available\n[here](https://finance.yahoo.com/currency-converter/). You can create a couple of\ncustom methods to return the list of major currencies and all currencies as\nfollows:\n\n```crystal\n# Returns an array of currency id where priority < 10\ndef major_currencies(hash)\n  hash.values.sort.take_while(&.priority.try(&.<(10))).map(&.id)\nend\n\n# Returns an array of all currency id\ndef all_currencies(hash)\n  hash.keys\nend\n\nmajor_currencies(Money::Currency.table)\n# => [\"usd\", \"eur\", \"gbp\", \"aud\", \"cad\", \"jpy\"]\n\nall_currencies(Money::Currency.table)\n# => [\"aed\", \"afn\", \"all\", ...]\n```\n\n### Default Currency\n\nBy default `Money` defaults to USD as its currency. This can be overwritten\nusing:\n\n```crystal\nMoney.default_currency = Money::Currency.find(\"CAD\")\n# or\nMoney.default_currency = :cad\n```\n\n### Currency Exponent\n\nThe exponent of a money value is the number of digits after the decimal\nseparator (which separates the major unit from the minor unit). See e.g.\n[ISO 4217](https://www.iso.org/iso-4217-currency-codes.html) for more\ninformation. You can find the exponent (as an `Int32`) by\n\n```crystal\nMoney::Currency.find(\"USD\").exponent # => 2\nMoney::Currency.find(\"JPY\").exponent # => 0\nMoney::Currency.find(\"MGA\").exponent # => 1\n```\n\n### Currency Lookup\n\nTo find a given currency by ISO 4217 numeric code (three digits) you can do\n\n```crystal\nMoney::Currency.find(&.iso_numeric.==(978)) # => #<Money::Currency @iso_numeric=978, @code=\"EUR\", @name=\"Euro\", @symbol=\"€\", @subunit=\"Cent\", @subunit_to_unit=100, @symbol_first=true ...>\n```\n\n## Currency Exchange\n\nExchanging money is performed through an exchange `Bank` object. The default\nexchange `Bank` object requires one to manually specify the exchange rate. Here's\nan example of how it works:\n\n```crystal\nMoney.default_bank.store[\"USD\", \"EUR\"] = 1.24515\nMoney.default_bank.store[\"EUR\", \"USD\"] = 0.803115\n\nMoney.new(100, \"USD\").exchange_to(\"EUR\") # => Money.new(@amount=1.24, @currency=\"EUR\")\nMoney.new(100, \"EUR\").exchange_to(\"USD\") # => Money.new(@amount=0.8,  @currency=\"USD\")\n```\n\nComparison and arithmetic operations work as expected:\n\n```crystal\nMoney.new(1000, \"USD\") <=> Money.new(900, \"USD\") # => 1; 9.00 USD is smaller\nMoney.new(1000, \"EUR\") + Money.new(10, \"EUR\") # => Money.new(@amount=10.1, @currency=\"EUR\")\n\nMoney.default_bank.store[\"USD\", \"EUR\"] = 0.5\nMoney.new(1000, \"EUR\") + Money.new(1000, \"USD\") # => Money.new(@amount=15.0, @currency=\"EUR\")\n```\n\n### Exchange rate stores\n\nThe default bank is initialized with an in-memory store for exchange rates.\n\n```crystal\nMoney.default_bank = Money::Bank::VariableExchange.new(Money::Currency::RateStore::Memory.new)\n```\n\nYou can pass you own store implementation, ie. for storing and retrieving rates off a database, file, cache, etc.\n\n```crystal\nMoney.default_bank = Money::Bank::VariableExchange.new(MyCustomStore.new)\n\n# Add to the underlying store\nMoney.default_bank.store[\"USD\", \"CAD\"] = 0.9\n\n# Retrieve from the underlying store\nMoney.default_bank.store[\"USD\", \"CAD\"] # => 0.9\n\n# Exchanging amounts just works\nMoney.new(10.0, \"USD\").exchange_to(\"CAD\") # => Money(@amount=9.0 @currency=\"CAD\")\n```\n\nThere is nothing stopping you from creating store objects which scrapes\n[XE](https://www.xe.com) for the current rates or just returns `rand(2)`:\n\n```crystal\nMoney.default_bank = Money::Bank::VariableExchange.new(StoreWhichScrapesXeDotCom.new)\n```\n\nYou can also implement your own `Bank` to calculate exchanges differently.\nDifferent banks can share Stores.\n\n```crystal\nMoney.default_bank = MyCustomBank.new(Money::Currency::RateStore::Memory.new)\n```\n\nIf you wish to disable automatic currency conversion to prevent arithmetic when\ncurrencies don't match:\n\n```crystal\nMoney.disallow_currency_conversion!\n```\n\n## Rounding\n\nBy default, `Money` objects are rounded to the nearest cent and the additional precision is not preserved:\n\n```crystal\nMoney.new(2.34567).to_s # => \"$2.35\"\n```\n\nTo round to the nearest cent (or anything more precise), you can use the `Money#round` method.\n\n```crystal\nMoney.new(2.34567).round(4).to_s # => \"$2.35\"\n```\n\nTo retain the additional precision, you will also need to set `Money.infinite_precision` to `true`.\n\n```crystal\nMoney.infinite_precision = true\n\nMoney.new(2.34567).to_s                    # => \"$2.3457\"\nMoney.new(2.34567).round(4, :to_zero).to_s # => \"$2.3456\"\n\n# or\n\nMoney.with_rounding_mode(:to_zero) do\n  Money.new(2.34567).round(4).to_s         # => \"$2.3456\"\nend\n```\n\n## Working with fibers\n\nBy default, global settings are not shared between fibers. You can use the\n`Money.spawn_with_same_context` to spawn a new fiber with the same global settings:\n\n```crystal\nMoney.default_currency = \"EUR\"\n\nMoney.spawn_with_same_context do\n  Money.default_currency.code # => \"EUR\"\nend\n```\n\n## Formatting\n\nThere are several formatting rules for when `Money#format` is called. For more information, check out the [formatting module source](https://github.com/crystal-money/money/blob/master/src/money/money/formatting.cr), or read the latest release's [docs](https://crystal-money.github.io/money/Money/Formatting.html).\n\nIf you wish to format money according to the EU's [Rules for expressing monetary units](https://style-guide.europa.eu/en/content/-/isg/topic?identifier=7.3.3-rules-for-expressing-monetary-units#id370303__id370303_PositionISO) in either English, Irish, Latvian or Maltese:\n\n```crystal\nmoney = Money.new(123, :gbp)               # => Money(@amount=1.23 @currency=\"GBP\")\nmoney.format(symbol: \"#{money.currency} \") # => \"GBP 1.23\"\n```\n\n## Heuristics\n\nTo parse a `String` containing amount with currency code or symbol you can do\n\n```crystal\nMoney.parse(\"$12.34\")    # => Money(@amount=12.34, @currency=\"USD\")\nMoney.parse(\"12.34 USD\") # => Money(@amount=12.34, @currency=\"USD\")\n```\n\n## Contributors\n\n- [Sija](https://github.com/Sija) Sijawusz Pur Rahnama - creator, maintainer\n\n## Thanks\n\nThanks to all of the [contributors](https://github.com/RubyMoney/money/blob/master/AUTHORS) for their awesome work on [RubyMoney](https://github.com/RubyMoney/money).\n","program":{"html_id":"money/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"money","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"money/BigDecimal","path":"BigDecimal.html","kind":"struct","full_name":"BigDecimal","name":"BigDecimal","abstract":false,"superclass":{"html_id":"money/Number","kind":"struct","full_name":"Number","name":"Number"},"ancestors":[{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Number","kind":"struct","full_name":"Number","name":"Number"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Steppable","kind":"module","full_name":"Steppable","name":"Steppable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/ext/big_decimal.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/ext/big_decimal.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"}],"doc":"https://github.com/crystal-lang/crystal/issues/15778","summary":"<p>https://github.com/crystal-lang/crystal/issues/15778</p>","instance_methods":[{"html_id":"to_s(io:IO,*,scientific_notation=true):Nil-instance-method","name":"to_s","doc":"ameba:disable Metrics/CyclomaticComplexity","summary":"<p>ameba:disable Metrics/CyclomaticComplexity</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"},{"name":"","external_name":"","restriction":""},{"name":"scientific_notation","default_value":"true","external_name":"scientific_notation","restriction":""}],"args_string":"(io : IO, *, scientific_notation = true) : Nil","args_html":"(io : IO, *, scientific_notation = <span class=\"n\">true</span>) : Nil","location":{"filename":"src/ext/big_decimal.cr","line_number":10,"url":"https://github.com/crystal-money/money/blob/7236287/src/ext/big_decimal.cr#L10"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"},{"name":"","external_name":"","restriction":""},{"name":"scientific_notation","default_value":"true","external_name":"scientific_notation","restriction":""}],"splat_index":1,"return_type":"Nil","visibility":"Public","body":"factor_powers_of_ten\n\ncstr = LibGMP.get_str(nil, 10, @value)\nlength = LibC.strlen(cstr)\nbuffer = Slice.new(cstr, length)\n\n\nif buffer[0]? == 45\n  io << '-'\n  buffer = buffer[1..]\n  length = length - 1\nend\n\ndecimal_exponent = length.to_i - @scale\npoint = decimal_exponent\nexp = point\nexp_mode = scientific_notation && (point > 15 || point < -3)\nif exp_mode\n  point = 1\nend\n\n\nif point < 1\n  io << '0'\nend\n\n\nif decimal_exponent > 0 && !exp_mode\n  io.write_string(buffer[0, {decimal_exponent, length}.min])\n  buffer = buffer[{decimal_exponent, length}.min...]\n  (point - length).times do\n    io << '0'\n  end\nelse\n  if point > 0\n    io.write_string(buffer[0, point])\n    buffer = buffer[point...]\n  end\nend\n\nio << '.'\n\n\nif point < 0\n  (-point).times do\n    io << '0'\n  end\nend\n\n\nwhile buffer.size > 1 && (buffer.last === '0')\n  buffer = buffer[0..-2]\nend\n\n\nio.write_string(buffer)\n\n\nif (decimal_exponent >= length && !exp_mode) || ((exp != point) && (length == 1))\n  io << '0'\nend\n\n\nif exp != point\n  io << 'e'\n  if exp > 0\n    io << '+'\n  end\n  (exp - 1).to_s(io)\nend\n"},"external_var":false},{"html_id":"to_s(*,scientific_notation=true):String-instance-method","name":"to_s","abstract":false,"args":[{"name":"","external_name":"","restriction":""},{"name":"scientific_notation","default_value":"true","external_name":"scientific_notation","restriction":""}],"args_string":"(*, scientific_notation = true) : String","args_html":"(*, scientific_notation = <span class=\"n\">true</span>) : String","location":{"filename":"src/ext/big_decimal.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/ext/big_decimal.cr#L3"},"def":{"name":"to_s","args":[{"name":"","external_name":"","restriction":""},{"name":"scientific_notation","default_value":"true","external_name":"scientific_notation","restriction":""}],"splat_index":0,"return_type":"String","visibility":"Public","body":"String.build do |io|\n  to_s(io, scientific_notation: scientific_notation)\nend"},"external_var":false}]},{"html_id":"money/Fiber","path":"Fiber.html","kind":"class","full_name":"Fiber","name":"Fiber","abstract":false,"superclass":{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/ext/fiber.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/ext/fiber.cr#L1"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"doc":"A `Fiber` is a light-weight execution unit managed by the Crystal runtime.\n\nIt is conceptually similar to an operating system thread but with less\noverhead and completely internal to the Crystal process. The runtime includes\na scheduler which schedules execution of fibers.\n\nA `Fiber` has a stack size of `8 MiB` which is usually also assigned\nto an operating system thread. But only `4KiB` are actually allocated at first\nso the memory footprint is very small.\n\nCommunication between fibers is usually passed through `Channel`.\n\n## Cooperative\n\nFibers are cooperative. That means execution can only be drawn from a fiber\nwhen it offers it. It can't be interrupted in its execution at random.\nIn order to make concurrency work, fibers must make sure to occasionally\nprovide hooks for the scheduler to swap in other fibers.\nIO operations like reading from a file descriptor are natural implementations\nfor this and the developer does not need to take further action on that. When\nIO access can't be served immediately by a buffer, the fiber will\nautomatically wait and yield execution. When IO is ready it's going to be\nresumed through the event loop.\n\nWhen a computation-intensive task has none or only rare IO operations, a fiber\nshould explicitly offer to yield execution from time to time using\n`Fiber.yield` to break up tight loops. The frequency of this call depends on\nthe application and concurrency model.\n\n## Event loop\n\nThe event loop is responsible for keeping track of sleeping fibers waiting for\nnotifications that IO is ready or a timeout reached. When a fiber can be woken,\nthe event loop enqueues it in the scheduler","summary":"<p>A <code><a href=\"Fiber.html\">Fiber</a></code> is a light-weight execution unit managed by the Crystal runtime.</p>","instance_methods":[{"html_id":"money_context:Money::Context-instance-method","name":"money_context","doc":"`Money::Context` object holding global settings for `Money` objects.","summary":"<p><code><a href=\"Money/Context.html\">Money::Context</a></code> object holding global settings for <code><a href=\"Money.html\">Money</a></code> objects.</p>","abstract":false,"location":{"filename":"src/ext/fiber.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/ext/fiber.cr#L3"},"def":{"name":"money_context","return_type":"Money::Context","visibility":"Public","body":"if (__temp_136 = @money_context).nil?\n  @money_context = (Money::Context.new)\nelse\n  __temp_136\nend"},"external_var":false},{"html_id":"money_context=(money_context:Money::Context)-instance-method","name":"money_context=","doc":"`Money::Context` object holding global settings for `Money` objects.","summary":"<p><code><a href=\"Money/Context.html\">Money::Context</a></code> object holding global settings for <code><a href=\"Money.html\">Money</a></code> objects.</p>","abstract":false,"args":[{"name":"money_context","external_name":"money_context","restriction":"Money::Context"}],"args_string":"(money_context : Money::Context)","args_html":"(money_context : <a href=\"Money/Context.html\">Money::Context</a>)","location":{"filename":"src/ext/fiber.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/ext/fiber.cr#L3"},"def":{"name":"money_context=","args":[{"name":"money_context","external_name":"money_context","restriction":"Money::Context"}],"visibility":"Public","body":"@money_context = money_context"},"external_var":false}]},{"html_id":"money/Money","path":"Money.html","kind":"struct","full_name":"Money","name":"Money","abstract":false,"superclass":{"html_id":"money/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"money/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Money/Exchange","kind":"module","full_name":"Money::Exchange","name":"Exchange"},{"html_id":"money/Money/Formatting","kind":"module","full_name":"Money::Formatting","name":"Formatting"},{"html_id":"money/Money/Allocate","kind":"module","full_name":"Money::Allocate","name":"Allocate"},{"html_id":"money/Money/Arithmetic","kind":"module","full_name":"Money::Arithmetic","name":"Arithmetic"},{"html_id":"money/Money/Casting","kind":"module","full_name":"Money::Casting","name":"Casting"},{"html_id":"money/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"money/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money.cr#L3"},{"filename":"src/money/bank.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L1"},{"filename":"src/money/bank/single_currency.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank/single_currency.cr#L1"},{"filename":"src/money/bank/variable_exchange.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank/variable_exchange.cr#L1"},{"filename":"src/money/context.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L1"},{"filename":"src/money/currency.cr","line_number":6,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L6"},{"filename":"src/money/currency/enumeration.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L1"},{"filename":"src/money/currency/loader.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/loader.cr#L3"},{"filename":"src/money/error.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/error.cr#L1"},{"filename":"src/money/money.cr","line_number":16,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L16"},{"filename":"src/money/money/allocate.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/allocate.cr#L1"},{"filename":"src/money/money/arithmetic.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L1"},{"filename":"src/money/money/casting.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/casting.cr#L1"},{"filename":"src/money/money/constructors.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/constructors.cr#L1"},{"filename":"src/money/money/exchange.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/exchange.cr#L1"},{"filename":"src/money/money/formatting.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/formatting.cr#L1"},{"filename":"src/money/money/json.cr","line_number":4,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/json.cr#L4"},{"filename":"src/money/money/parse.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/parse.cr#L1"},{"filename":"src/money/version.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/version.cr#L1"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"{{ (`shards version \\\"/home/runner/work/money/money/src/money\\\"`).chomp.stringify }}"}],"included_modules":[{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"money/Money/Allocate","kind":"module","full_name":"Money::Allocate","name":"Allocate"},{"html_id":"money/Money/Arithmetic","kind":"module","full_name":"Money::Arithmetic","name":"Arithmetic"},{"html_id":"money/Money/Casting","kind":"module","full_name":"Money::Casting","name":"Casting"},{"html_id":"money/Money/Exchange","kind":"module","full_name":"Money::Exchange","name":"Exchange"},{"html_id":"money/Money/Formatting","kind":"module","full_name":"Money::Formatting","name":"Formatting"}],"extended_modules":[{"html_id":"money/Money/Constructors","kind":"module","full_name":"Money::Constructors","name":"Constructors"},{"html_id":"money/Money/Context/Delegators","kind":"module","full_name":"Money::Context::Delegators","name":"Delegators"},{"html_id":"money/Money/Parse","kind":"module","full_name":"Money::Parse","name":"Parse"}],"doc":"\"Money is any object or record that is generally accepted as payment for\ngoods and services and repayment of debts in a given socio-economic context\nor country.\" - [Wikipedia](https://en.wikipedia.org/wiki/Money)\n\nAn instance of `Money` represents an amount of a specific currency.\n\n`Money` is a value object and should be treated as immutable.","summary":"<p>&quot;Money is any object or record that is generally accepted as payment for goods and services and repayment of debts in a given socio-economic context or country.&quot; - <a href=\"https://en.wikipedia.org/wiki/Money\">Wikipedia</a></p>","class_methods":[{"html_id":"disallow_currency_conversion!-class-method","name":"disallow_currency_conversion!","doc":"Sets the default bank to be a `Bank::SingleCurrency` bank that raises on\ncurrency exchange. Useful when apps operate in a single currency at a time.","summary":"<p>Sets the default bank to be a <code><a href=\"Money/Bank/SingleCurrency.html\">Bank::SingleCurrency</a></code> bank that raises on currency exchange.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":109,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L109"},"def":{"name":"disallow_currency_conversion!","visibility":"Public","body":"self.default_bank = Bank::SingleCurrency.new"},"external_var":false},{"html_id":"same_context_wrapper(&block:->):Proc(Nil)-class-method","name":"same_context_wrapper","doc":"Returns a proc that sets the `Fiber.current#money_context` to the current\ncontext (copied from the current fiber - references will be shared though)\nand then calls the given *block*. Useful when you need to spawn a new fiber\nlater with the same context as the current fiber.\n\n```\nMoney.default_currency = \"PLN\"\n\nspawn &Money.same_context_wrapper(&block)\n# or\nspawn &Money.same_context_wrapper do\n  Money.default_currency.code # => \"PLN\"\nend\n```\n\nNOTE: The proc will not set the context back to the original value.\n\nSee also `#spawn_with_same_context`.","summary":"<p>Returns a proc that sets the <code>Fiber.current#money_context</code> to the current context (copied from the current fiber - references will be shared though) and then calls the given <em>block</em>.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":48,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L48"},"def":{"name":"same_context_wrapper","yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(->)"},"return_type":"Proc(Nil)","visibility":"Public","body":"current_context = Fiber.current.money_context.dup\n-> do\n  Fiber.current.money_context = current_context\n  block.call\nend\n"},"external_var":false},{"html_id":"spawn_with_same_context(**options,&block:->):Nil-class-method","name":"spawn_with_same_context","doc":"Spawns a new fiber with the `Money::Context` copied from the current fiber.\n\n```\nMoney.default_currency.code # => \"USD\"\nMoney.default_currency = \"PLN\"\n\nspawn do\n  Money.default_currency.code # => \"USD\"\nend\n\n# vs\n\nMoney.spawn_with_same_context do\n  Money.default_currency.code # => \"PLN\"\nend\n```\n\nNOTE: References to the `#default_{currency, bank, rate_store}` properties\nwill be shared between the current fiber and the spawned fiber.\n\nSee also `#same_context_wrapper`.","summary":"<p>Spawns a new fiber with the <code><a href=\"Money/Context.html\">Money::Context</a></code> copied from the current fiber.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":77,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L77"},"def":{"name":"spawn_with_same_context","double_splat":{"name":"options","external_name":"options","restriction":""},"yields":0,"block_arity":0,"block_arg":{"name":"block","external_name":"block","restriction":"(->)"},"return_type":"Nil","visibility":"Public","body":"spawn(*Tuple.new, **options, &same_context_wrapper(&block))"},"external_var":false},{"html_id":"with_infinite_precision(enabled=true,&)-class-method","name":"with_infinite_precision","doc":"Sets the given infinite precision value within the lifetime of the given block.\n\nSee also `Money.infinite_precision?`.","summary":"<p>Sets the given infinite precision value within the lifetime of the given block.</p>","abstract":false,"args":[{"name":"enabled","default_value":"true","external_name":"enabled","restriction":""}],"args_string":"(enabled = true, &)","args_html":"(enabled = <span class=\"n\">true</span>, &)","location":{"filename":"src/money/money.cr","line_number":84,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L84"},"def":{"name":"with_infinite_precision","args":[{"name":"enabled","default_value":"true","external_name":"enabled","restriction":""}],"yields":0,"block_arity":0,"visibility":"Public","body":"prev_infinite_precision = infinite_precision?\nself.infinite_precision = enabled\nbegin\n  yield\nensure\n  self.infinite_precision = prev_infinite_precision\nend\n"},"external_var":false},{"html_id":"with_rounding_mode(mode:Number::RoundingMode,&)-class-method","name":"with_rounding_mode","doc":"Sets the given rounding *mode* within the lifetime of the given block.\n\nSee also `Money.rounding_mode`.","summary":"<p>Sets the given rounding <em>mode</em> within the lifetime of the given block.</p>","abstract":false,"args":[{"name":"mode","external_name":"mode","restriction":"Number::RoundingMode"}],"args_string":"(mode : Number::RoundingMode, &)","args_html":"(mode : Number::RoundingMode, &)","location":{"filename":"src/money/money.cr","line_number":97,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L97"},"def":{"name":"with_rounding_mode","args":[{"name":"mode","external_name":"mode","restriction":"Number::RoundingMode"}],"yields":0,"block_arity":0,"visibility":"Public","body":"prev_rounding_mode = rounding_mode\nself.rounding_mode = mode\nbegin\n  yield\nensure\n  self.rounding_mode = prev_rounding_mode\nend\n"},"external_var":false}],"constructors":[{"html_id":"new(amount:Number=0,currency=Money.default_currency,bank=nil)-class-method","name":"new","doc":"Creates a new `Money` object of value given as an *amount*\nof the given *currency* (as fractional if `Int`, or whole amount otherwise).\n\n```\nMoney.new                      # => Money(@amount=0.0 @currency=\"USD\")\nMoney.new(1_50)                # => Money(@amount=1.5 @currency=\"USD\")\nMoney.new(1.5, :usd)           # => Money(@amount=1.5 @currency=\"USD\")\nMoney.new(1.5.to_big_d, \"USD\") # => Money(@amount=1.5 @currency=\"USD\")\n```","summary":"<p>Creates a new <code><a href=\"Money.html\">Money</a></code> object of value given as an <em>amount</em> of the given <em>currency</em> (as fractional if <code>Int</code>, or whole amount otherwise).</p>","abstract":false,"args":[{"name":"amount","default_value":"0","external_name":"amount","restriction":"Number"},{"name":"currency","default_value":"Money.default_currency","external_name":"currency","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"args_string":"(amount : Number = 0, currency = Money.default_currency, bank = nil)","args_html":"(amount : Number = <span class=\"n\">0</span>, currency = <span class=\"t\">Money</span>.default_currency, bank = <span class=\"n\">nil</span>)","location":{"filename":"src/money/money.cr","line_number":138,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L138"},"def":{"name":"new","args":[{"name":"amount","default_value":"0","external_name":"amount","restriction":"Number"},{"name":"currency","default_value":"Money.default_currency","external_name":"currency","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(amount, currency, bank)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false},{"html_id":"new(pull:JSON::PullParser)-class-method","name":"new","abstract":false,"args":[{"name":"pull","external_name":"pull","restriction":"JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/money/money/json.cr","line_number":10,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/json.cr#L10"},"def":{"name":"new","args":[{"name":"pull","external_name":"pull","restriction":"JSON::PullParser"}],"visibility":"Public","body":"case pull.kind\nwhen .string?\n  parse(pull.read_string)\nelse\n  previous_def(pull)\nend"},"external_var":false}],"instance_methods":[{"html_id":"<=>(other:Money):Int32-instance-method","name":"<=>","doc":"Compares two `Money` objects.","summary":"<p>Compares two <code><a href=\"Money.html\">Money</a></code> objects.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Money"}],"args_string":"(other : Money) : Int32","args_html":"(other : <a href=\"Money.html\">Money</a>) : Int32","location":{"filename":"src/money/money.cr","line_number":184,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L184"},"def":{"name":"<=>","args":[{"name":"other","external_name":"other","restriction":"Money"}],"return_type":"Int32","visibility":"Public","body":"if zero? && other.zero?\n  return 0\nend\n\nwith_same_currency(other) do |converted_other|\n  amount <=> converted_other.amount\nend\n"},"external_var":false},{"html_id":"amount:BigDecimal-instance-method","name":"amount","doc":"Returns the numerical value of the money.\n\n```\nMoney.new(1_00, \"USD\").amount # => 1.0\n```\n\nSee also `#fractional`, `Money.infinite_precision?` and `Money.rounding_mode`.","summary":"<p>Returns the numerical value of the money.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":211,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L211"},"def":{"name":"amount","return_type":"BigDecimal","visibility":"Public","body":"if Money.infinite_precision?\n  @amount\nelse\n  @amount.round(currency.exponent, mode: Money.rounding_mode)\nend"},"external_var":false},{"html_id":"bank:Bank-instance-method","name":"bank","doc":"The `Bank` object which currency exchanges are performed with.\n\nNOTE: Will return `Money.default_bank` if set to `nil` (the default).","summary":"<p>The <code><a href=\"Money/Bank.html\">Bank</a></code> object which currency exchanges are performed with.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":125,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L125"},"def":{"name":"bank","return_type":"Bank","visibility":"Public","body":"@bank || Money.default_bank"},"external_var":false},{"html_id":"bank=(bank:Bank|Nil)-instance-method","name":"bank=","doc":"The `Bank` object which currency exchanges are performed with.\n\nNOTE: Will return `Money.default_bank` if set to `nil` (the default).","summary":"<p>The <code><a href=\"Money/Bank.html\">Bank</a></code> object which currency exchanges are performed with.</p>","abstract":false,"args":[{"name":"bank","external_name":"bank","restriction":"Bank | ::Nil"}],"args_string":"(bank : Bank | Nil)","args_html":"(bank : <a href=\"Money/Bank.html\">Bank</a> | Nil)","location":{"filename":"src/money/money.cr","line_number":122,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L122"},"def":{"name":"bank=","args":[{"name":"bank","external_name":"bank","restriction":"Bank | ::Nil"}],"visibility":"Public","body":"@bank = bank"},"external_var":false},{"html_id":"cents:BigDecimal-instance-method","name":"cents","doc":"Alias of `#fractional`.","summary":"<p>Alias of <code><a href=\"Money.html#fractional%3ABigDecimal-instance-method\">#fractional</a></code>.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":244,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L244"},"def":{"name":"cents","return_type":"BigDecimal","visibility":"Public","body":"fractional"},"external_var":false},{"html_id":"currency:Currency-instance-method","name":"currency","doc":"The money's currency.","summary":"<p>The money's currency.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":117,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L117"},"def":{"name":"currency","return_type":"Currency","visibility":"Public","body":"@currency"},"external_var":false},{"html_id":"dollars:BigDecimal-instance-method","name":"dollars","doc":"Alias of `#amount`.","summary":"<p>Alias of <code><a href=\"Money.html#amount%3ABigDecimal-instance-method\">#amount</a></code>.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":238,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L238"},"def":{"name":"dollars","return_type":"BigDecimal","visibility":"Public","body":"amount"},"external_var":false},{"html_id":"fractional:BigDecimal-instance-method","name":"fractional","doc":"The value of the monetary amount represented in the fractional or subunit\nof the currency.\n\nFor example, in the US dollar currency the fractional unit is cents, and\nthere are 100 cents in one US dollar. So given the `Money` representation of\none US dollar, the fractional interpretation is 100.\n\nAnother example is that of the Kuwaiti dinar. In this case the fractional\nunit is the fils and there 1000 fils to one Kuwaiti dinar. So given the\n`Money` representation of one Kuwaiti dinar, the fractional interpretation\nis 1000.\n\nSee also `Money.infinite_precision?` and `Money.rounding_mode`.","summary":"<p>The value of the monetary amount represented in the fractional or subunit of the currency.</p>","abstract":false,"location":{"filename":"src/money/money.cr","line_number":232,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L232"},"def":{"name":"fractional","return_type":"BigDecimal","visibility":"Public","body":"amount * currency.subunit_to_unit"},"external_var":false},{"html_id":"hash(hasher)-instance-method","name":"hash","doc":"Returns hash value based on the `amount` and `currency` attributes.","summary":"<p>Returns hash value based on the <code><a href=\"Money.html#amount%3ABigDecimal-instance-method\">#amount</a></code> and <code><a href=\"Money.html#currency%3ACurrency-instance-method\">#currency</a></code> attributes.</p>","abstract":false,"args":[{"name":"hasher","external_name":"hasher","restriction":""}],"args_string":"(hasher)","args_html":"(hasher)","location":{"filename":"src/money/money.cr","line_number":181,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L181"},"def":{"name":"hash","args":[{"name":"hasher","external_name":"hasher","restriction":""}],"visibility":"Public","body":"hasher = amount.hash(hasher)\n\nhasher = currency.hash(hasher)\n\nhasher\n"},"external_var":false},{"html_id":"nearest_cash_value(rounding_mode:Number::RoundingMode=Money.rounding_mode):BigDecimal-instance-method","name":"nearest_cash_value","doc":"Returns the nearest possible amount in cash value (cents).\n\nFor example, in Swiss franc (CHF), the smallest possible amount of\ncash value is CHF 0.05. Therefore, for CHF 0.07 this method returns CHF 0.05,\nand for CHF 0.08, CHF 0.10.\n\nSee also `#rounded_to_nearest_cash_value` and `Currency#smallest_denomination`.","summary":"<p>Returns the nearest possible amount in cash value (cents).</p>","abstract":false,"args":[{"name":"rounding_mode","default_value":"Money.rounding_mode","external_name":"rounding_mode","restriction":"Number::RoundingMode"}],"args_string":"(rounding_mode : Number::RoundingMode = Money.rounding_mode) : BigDecimal","args_html":"(rounding_mode : Number::RoundingMode = <span class=\"t\">Money</span>.rounding_mode) : <a href=\"BigDecimal.html\">BigDecimal</a>","location":{"filename":"src/money/money.cr","line_number":255,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L255"},"def":{"name":"nearest_cash_value","args":[{"name":"rounding_mode","default_value":"Money.rounding_mode","external_name":"rounding_mode","restriction":"Number::RoundingMode"}],"return_type":"BigDecimal","visibility":"Public","body":"if smallest_denomination = currency.smallest_denomination\nelse\n  raise(UndefinedSmallestDenominationError.new)\nend\nrounded_value = (fractional / smallest_denomination).round(rounding_mode)\nrounded_value = rounded_value * smallest_denomination\nrounded_value\n"},"external_var":false},{"html_id":"round(precision:Int=0,mode:Number::RoundingMode=Money.rounding_mode):Money-instance-method","name":"round","doc":"Rounds the monetary amount to smallest unit of coinage, using\nrounding *mode* if given, or `Money.rounding_mode` otherwise.\n\n```\nMoney.new(10.1, \"USD\").round                   # => Money(@amount=10.0, @currency=\"USD\")\nMoney.new(10.5, \"USD\").round(mode: :ties_even) # => Money(@amount=10.0, @currency=\"USD\")\nMoney.new(10.5, \"USD\").round(mode: :ties_away) # => Money(@amount=11.0, @currency=\"USD\")\n```","summary":"<p>Rounds the monetary amount to smallest unit of coinage, using rounding <em>mode</em> if given, or <code>Money.rounding_mode</code> otherwise.</p>","abstract":false,"args":[{"name":"precision","default_value":"0","external_name":"precision","restriction":"Int"},{"name":"mode","default_value":"Money.rounding_mode","external_name":"mode","restriction":"Number::RoundingMode"}],"args_string":"(precision : Int = 0, mode : Number::RoundingMode = Money.rounding_mode) : Money","args_html":"(precision : Int = <span class=\"n\">0</span>, mode : Number::RoundingMode = <span class=\"t\">Money</span>.rounding_mode) : <a href=\"Money.html\">Money</a>","location":{"filename":"src/money/money.cr","line_number":280,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L280"},"def":{"name":"round","args":[{"name":"precision","default_value":"0","external_name":"precision","restriction":"Int"},{"name":"mode","default_value":"Money.rounding_mode","external_name":"mode","restriction":"Number::RoundingMode"}],"return_type":"Money","visibility":"Public","body":"copy_with(amount: @amount.round(precision, mode: mode))"},"external_var":false},{"html_id":"rounded_to_nearest_cash_value(rounding_mode:Number::RoundingMode=Money.rounding_mode):Money-instance-method","name":"rounded_to_nearest_cash_value","doc":"Returns a new `Money` instance with the nearest possible amount in cash value.\n\nSee also `#nearest_cash_value`.","summary":"<p>Returns a new <code><a href=\"Money.html\">Money</a></code> instance with the nearest possible amount in cash value.</p>","abstract":false,"args":[{"name":"rounding_mode","default_value":"Money.rounding_mode","external_name":"rounding_mode","restriction":"Number::RoundingMode"}],"args_string":"(rounding_mode : Number::RoundingMode = Money.rounding_mode) : Money","args_html":"(rounding_mode : Number::RoundingMode = <span class=\"t\">Money</span>.rounding_mode) : <a href=\"Money.html\">Money</a>","location":{"filename":"src/money/money.cr","line_number":268,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L268"},"def":{"name":"rounded_to_nearest_cash_value","args":[{"name":"rounding_mode","default_value":"Money.rounding_mode","external_name":"rounding_mode","restriction":"Number::RoundingMode"}],"return_type":"Money","visibility":"Public","body":"copy_with(fractional: nearest_cash_value(rounding_mode))"},"external_var":false},{"html_id":"with_currency(new_currency:String|Symbol|Currency):Money-instance-method","name":"with_currency","doc":"Returns a new `Money` instance in a given currency - if it's different\nfrom the current `#currency` - or `self` otherwise, leaving the amount\nintact and **not** performing currency conversion.","summary":"<p>Returns a new <code><a href=\"Money.html\">Money</a></code> instance in a given currency - if it's different from the current <code><a href=\"Money.html#currency%3ACurrency-instance-method\">#currency</a></code> - or <code>self</code> otherwise, leaving the amount intact and <strong>not</strong> performing currency conversion.</p>","abstract":false,"args":[{"name":"new_currency","external_name":"new_currency","restriction":"String | Symbol | Currency"}],"args_string":"(new_currency : String | Symbol | Currency) : Money","args_html":"(new_currency : String | Symbol | <a href=\"Money/Currency.html\">Currency</a>) : <a href=\"Money.html\">Money</a>","location":{"filename":"src/money/money.cr","line_number":195,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money.cr#L195"},"def":{"name":"with_currency","args":[{"name":"new_currency","external_name":"new_currency","restriction":"String | Symbol | Currency"}],"return_type":"Money","visibility":"Public","body":"new_currency = Currency.wrap(new_currency)\nif new_currency == currency\n  self\nelse\n  copy_with(currency: new_currency, amount: @amount)\nend\n"},"external_var":false}],"types":[{"html_id":"money/Money/Allocate","path":"Money/Allocate.html","kind":"module","full_name":"Money::Allocate","name":"Allocate","abstract":false,"locations":[{"filename":"src/money/money/allocate.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/allocate.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"instance_methods":[{"html_id":"allocate(parts:Enumerable(Number)):Array(Money)-instance-method","name":"allocate","doc":"Splits a given amount in parts without losing pennies.\n\nThe left-over pennies will be distributed round-robin amongst the parties.\nThis means that parts listed first will likely receive more pennies than\nones listed later.\n\nPass `{2, 1, 1}` as input to give twice as much to _part1_ as _part2_ or _part3_\nwhich results in **50%** of the cash assigned to _part1_, **25%** to _part2_,\nand **25%** to _part3_.\n\nThe results should always add up to the original amount.\n\n```\nMoney.new(5, \"USD\").allocate(3, 7).map(&.cents)      # => [2, 3]\nMoney.new(100, \"USD\").allocate(1, 1, 1).map(&.cents) # => [34, 33, 33]\n```","summary":"<p>Splits a given amount in parts without losing pennies.</p>","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":"Enumerable(Number)"}],"args_string":"(parts : Enumerable(Number)) : Array(Money)","args_html":"(parts : Enumerable(Number)) : Array(<a href=\"../Money.html\">Money</a>)","location":{"filename":"src/money/money/allocate.cr","line_number":52,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/allocate.cr#L52"},"def":{"name":"allocate","args":[{"name":"parts","external_name":"parts","restriction":"Enumerable(Number)"}],"return_type":"Array(Money)","visibility":"Public","body":"(Money::Allocate.generate(fractional, parts, whole_amounts: !Money.infinite_precision?)).map do |amount|\n  copy_with(fractional: amount)\nend"},"external_var":false},{"html_id":"allocate(*parts:Number):Array(Money)-instance-method","name":"allocate","doc":"Splits a given amount in parts without losing pennies.\n\nThe left-over pennies will be distributed round-robin amongst the parties.\nThis means that parts listed first will likely receive more pennies than\nones listed later.\n\nPass `{2, 1, 1}` as input to give twice as much to _part1_ as _part2_ or _part3_\nwhich results in **50%** of the cash assigned to _part1_, **25%** to _part2_,\nand **25%** to _part3_.\n\nThe results should always add up to the original amount.\n\n```\nMoney.new(5, \"USD\").allocate(3, 7).map(&.cents)      # => [2, 3]\nMoney.new(100, \"USD\").allocate(1, 1, 1).map(&.cents) # => [34, 33, 33]\n```","summary":"<p>Splits a given amount in parts without losing pennies.</p>","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":"Number"}],"args_string":"(*parts : Number) : Array(Money)","args_html":"(*parts : Number) : Array(<a href=\"../Money.html\">Money</a>)","location":{"filename":"src/money/money/allocate.cr","line_number":59,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/allocate.cr#L59"},"def":{"name":"allocate","args":[{"name":"parts","external_name":"parts","restriction":"Number"}],"splat_index":0,"return_type":"Array(Money)","visibility":"Public","body":"allocate(parts)"},"external_var":false},{"html_id":"split(parts:Int):Array(Money)-instance-method","name":"split","doc":"Splits money evenly amongst parties without losing pennies.\n\n```\nMoney.new(100, \"USD\").split(2).map(&.cents) # => [50, 50]\nMoney.new(100, \"USD\").split(3).map(&.cents) # => [34, 33, 33]\n```","summary":"<p>Splits money evenly amongst parties without losing pennies.</p>","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":"Int"}],"args_string":"(parts : Int) : Array(Money)","args_html":"(parts : Int) : Array(<a href=\"../Money.html\">Money</a>)","location":{"filename":"src/money/money/allocate.cr","line_number":69,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/allocate.cr#L69"},"def":{"name":"split","args":[{"name":"parts","external_name":"parts","restriction":"Int"}],"return_type":"Array(Money)","visibility":"Public","body":"if parts.positive?\nelse\n  raise(ArgumentError.new(\"Need at least one part\"))\nend\nallocate(Array.new(parts, 1))\n"},"external_var":false}]},{"html_id":"money/Money/Arithmetic","path":"Money/Arithmetic.html","kind":"module","full_name":"Money::Arithmetic","name":"Arithmetic","abstract":false,"locations":[{"filename":"src/money/money/arithmetic.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"instance_methods":[{"html_id":"%(other:Number|Money):Money-instance-method","name":"%","doc":"Alias of `#modulo`.","summary":"<p>Alias of <code><a href=\"../Money/Arithmetic.html#modulo%28other%3ANumber%7CMoney%29%3AMoney-instance-method\">#modulo</a></code>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Number | Money"}],"args_string":"(other : Number | Money) : Money","args_html":"(other : Number | <a href=\"../Money.html\">Money</a>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":160,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L160"},"def":{"name":"%","args":[{"name":"other","external_name":"other","restriction":"Number | Money"}],"return_type":"Money","visibility":"Public","body":"modulo(other)"},"external_var":false},{"html_id":"*(other:Number):Money-instance-method","name":"*","doc":"Multiplies the monetary value with the given *other* `Number` and returns\na new `Money` object with this monetary value and the same `#currency`.\n\n```\nMoney.new(100) * 2 # => Money(@amount=2.0)\n```","summary":"<p>Multiplies the monetary value with the given <em>other</em> <code>Number</code> and returns a new <code><a href=\"../Money.html\">Money</a></code> object with this monetary value and the same <code>#currency</code>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Number"}],"args_string":"(other : Number) : Money","args_html":"(other : Number) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":98,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L98"},"def":{"name":"*","args":[{"name":"other","external_name":"other","restriction":"Number"}],"return_type":"Money","visibility":"Public","body":"copy_with(amount: amount * other)"},"external_var":false},{"html_id":"+(other:Money):Money-instance-method","name":"+","doc":"Returns a new `Money` object containing the sum of the two\noperands' monetary values.\n\n```\nMoney.new(100) + Money.new(100) # => Money(@amount=2.0)\n```","summary":"<p>Returns a new <code><a href=\"../Money.html\">Money</a></code> object containing the sum of the two operands' monetary values.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Money"}],"args_string":"(other : Money) : Money","args_html":"(other : <a href=\"../Money.html\">Money</a>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":70,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L70"},"def":{"name":"+","args":[{"name":"other","external_name":"other","restriction":"Money"}],"return_type":"Money","visibility":"Public","body":"if other.zero?\n  return self\nend\n\nwith_same_currency(other) do |converted_other|\n  copy_with(amount: amount + converted_other.amount)\nend\n"},"external_var":false},{"html_id":"+:Money-instance-method","name":"+","doc":"Alias of `#abs`.\n\n```\n+Money.new(-100) # => Money(@amount=1.0)\n```","summary":"<p>Alias of <code><a href=\"../Money/Arithmetic.html#abs%3AMoney-instance-method\">#abs</a></code>.</p>","abstract":false,"location":{"filename":"src/money/money/arithmetic.cr","line_number":51,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L51"},"def":{"name":"+","return_type":"Money","visibility":"Public","body":"abs"},"external_var":false},{"html_id":"-(other:Money):Money-instance-method","name":"-","doc":"Returns a new `Money` object containing the difference between the two\noperands' monetary values.\n\n```\nMoney.new(100) - Money.new(99) # => Money(@amount=0.01)\n```","summary":"<p>Returns a new <code><a href=\"../Money.html\">Money</a></code> object containing the difference between the two operands' monetary values.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Money"}],"args_string":"(other : Money) : Money","args_html":"(other : <a href=\"../Money.html\">Money</a>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":84,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L84"},"def":{"name":"-","args":[{"name":"other","external_name":"other","restriction":"Money"}],"return_type":"Money","visibility":"Public","body":"if other.zero?\n  return self\nend\n\nwith_same_currency(other) do |converted_other|\n  copy_with(amount: amount - converted_other.amount)\nend\n"},"external_var":false},{"html_id":"-:Money-instance-method","name":"-","doc":"Returns a new `Money` object with changed polarity.\n\n```\n-Money.new(100) # => Money(@amount=-1.0)\n```","summary":"<p>Returns a new <code><a href=\"../Money.html\">Money</a></code> object with changed polarity.</p>","abstract":false,"location":{"filename":"src/money/money/arithmetic.cr","line_number":60,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L60"},"def":{"name":"-","return_type":"Money","visibility":"Public","body":"copy_with(amount: -amount)"},"external_var":false},{"html_id":"/(other:Number):Money-instance-method","name":"/","doc":"Divides the monetary value with the given *other* `Number` and returns\na new `Money` object with this monetary value and the same `#currency`.\n\n```\nMoney.new(100) / 10 # => Money(@amount=0.1)\n```","summary":"<p>Divides the monetary value with the given <em>other</em> <code>Number</code> and returns a new <code><a href=\"../Money.html\">Money</a></code> object with this monetary value and the same <code>#currency</code>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Number"}],"args_string":"(other : Number) : Money","args_html":"(other : Number) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":108,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L108"},"def":{"name":"/","args":[{"name":"other","external_name":"other","restriction":"Number"}],"return_type":"Money","visibility":"Public","body":"copy_with(amount: amount / other)"},"external_var":false},{"html_id":"/(other:Money):BigDecimal-instance-method","name":"/","doc":"Divides the monetary value with the given *other* `Money` object and\nreturns a ratio.\n\n```\nMoney.new(100) / Money.new(10) # => 10.0\n```","summary":"<p>Divides the monetary value with the given <em>other</em> <code><a href=\"../Money.html\">Money</a></code> object and returns a ratio.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Money"}],"args_string":"(other : Money) : BigDecimal","args_html":"(other : <a href=\"../Money.html\">Money</a>) : <a href=\"../BigDecimal.html\">BigDecimal</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":118,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L118"},"def":{"name":"/","args":[{"name":"other","external_name":"other","restriction":"Money"}],"return_type":"BigDecimal","visibility":"Public","body":"with_same_currency(other) do |converted_other|\n  amount / converted_other.amount\nend"},"external_var":false},{"html_id":"abs:Money-instance-method","name":"abs","doc":"Returns absolute value of `self` as a new `Money` object.\n\n```\nMoney.new(-100).abs # => Money(@amount=1.0)\n```","summary":"<p>Returns absolute value of <code>self</code> as a new <code><a href=\"../Money.html\">Money</a></code> object.</p>","abstract":false,"location":{"filename":"src/money/money/arithmetic.cr","line_number":41,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L41"},"def":{"name":"abs","return_type":"Money","visibility":"Public","body":"copy_with(amount: amount.abs)"},"external_var":false},{"html_id":"divmod(other:Money):Tuple(BigDecimal,Money)-instance-method","name":"divmod","doc":"Divide by `Money` or `Number` and return `Tuple` containing\nquotient and modulus.\n\n```\nMoney.new(100).divmod(9)            # => {Money(@amount=0.11), Money(@amount=0.01)}\nMoney.new(100).divmod(Money.new(9)) # => {11, Money(@amount=0.01)}\n```","summary":"<p>Divide by <code><a href=\"../Money.html\">Money</a></code> or <code>Number</code> and return <code>Tuple</code> containing quotient and modulus.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Money"}],"args_string":"(other : Money) : Tuple(BigDecimal, Money)","args_html":"(other : <a href=\"../Money.html\">Money</a>) : Tuple(<a href=\"../BigDecimal.html\">BigDecimal</a>, <a href=\"../Money.html\">Money</a>)","location":{"filename":"src/money/money/arithmetic.cr","line_number":131,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L131"},"def":{"name":"divmod","args":[{"name":"other","external_name":"other","restriction":"Money"}],"return_type":"::Tuple(BigDecimal, Money)","visibility":"Public","body":"with_same_currency(other) do |converted_other|\n  quotient, remainder = fractional.divmod(converted_other.fractional)\n\n  {quotient, copy_with(fractional: remainder)}\nend"},"external_var":false},{"html_id":"divmod(other:Number):Tuple(Money,Money)-instance-method","name":"divmod","doc":"Divide by `Money` or `Number` and return `Tuple` containing\nquotient and modulus.\n\n```\nMoney.new(100).divmod(9)            # => {Money(@amount=0.11), Money(@amount=0.01)}\nMoney.new(100).divmod(Money.new(9)) # => {11, Money(@amount=0.01)}\n```","summary":"<p>Divide by <code><a href=\"../Money.html\">Money</a></code> or <code>Number</code> and return <code>Tuple</code> containing quotient and modulus.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Number"}],"args_string":"(other : Number) : Tuple(Money, Money)","args_html":"(other : Number) : Tuple(<a href=\"../Money.html\">Money</a>, <a href=\"../Money.html\">Money</a>)","location":{"filename":"src/money/money/arithmetic.cr","line_number":141,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L141"},"def":{"name":"divmod","args":[{"name":"other","external_name":"other","restriction":"Number"}],"return_type":"::Tuple(Money, Money)","visibility":"Public","body":"quotient, remainder = fractional.divmod(other.to_big_d)\n\n{copy_with(fractional: quotient), copy_with(fractional: remainder)}\n"},"external_var":false},{"html_id":"modulo(other:Number|Money):Money-instance-method","name":"modulo","doc":"Equivalent to `#divmod(other)[1]`.\n\n```\nMoney.new(100).modulo(9)            # => Money(@amount=0.01)\nMoney.new(100).modulo(Money.new(9)) # => Money(@amount=0.01)\n```","summary":"<p>Equivalent to <code><a href=\"../Money/Arithmetic.html#divmod%28other%3AMoney%29%3ATuple%28BigDecimal%2CMoney%29-instance-method\">#divmod(other)</a>[1]</code>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Number | Money"}],"args_string":"(other : Number | Money) : Money","args_html":"(other : Number | <a href=\"../Money.html\">Money</a>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":154,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L154"},"def":{"name":"modulo","args":[{"name":"other","external_name":"other","restriction":"Number | Money"}],"return_type":"Money","visibility":"Public","body":"(divmod(other))[1]"},"external_var":false},{"html_id":"negative?-instance-method","name":"negative?","doc":"Returns `true` if the money amount is less than 0, `false` otherwise.\n\n```\nMoney.new(-1).negative? # => true\nMoney.new(0).negative?  # => false\nMoney.new(1).negative?  # => false\n```","summary":"<p>Returns <code>true</code> if the money amount is less than 0, <code>false</code> otherwise.</p>","abstract":false,"location":{"filename":"src/money/money/arithmetic.cr","line_number":21,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L21"},"def":{"name":"negative?","visibility":"Public","body":"amount.negative?"},"external_var":false},{"html_id":"positive?-instance-method","name":"positive?","doc":"Returns `true` if the money amount is greater than 0, `false` otherwise.\n\n```\nMoney.new(1).positive?  # => true\nMoney.new(0).positive?  # => false\nMoney.new(-1).positive? # => false\n```","summary":"<p>Returns <code>true</code> if the money amount is greater than 0, <code>false</code> otherwise.</p>","abstract":false,"location":{"filename":"src/money/money/arithmetic.cr","line_number":10,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L10"},"def":{"name":"positive?","visibility":"Public","body":"amount.positive?"},"external_var":false},{"html_id":"remainder(other:Number):Money-instance-method","name":"remainder","doc":"If different signs `#modulo(other) - other`, otherwise `#modulo(other)`.\n\n```\nMoney.new(100).remainder(9) # => Money(@amount=0.01)\n```","summary":"<p>If different signs <code><a href=\"../Money/Arithmetic.html#modulo%28other%3ANumber%7CMoney%29%3AMoney-instance-method\">#modulo(other)</a> - other</code>, otherwise <code><a href=\"../Money/Arithmetic.html#modulo%28other%3ANumber%7CMoney%29%3AMoney-instance-method\">#modulo(other)</a></code>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Number"}],"args_string":"(other : Number) : Money","args_html":"(other : Number) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/arithmetic.cr","line_number":169,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L169"},"def":{"name":"remainder","args":[{"name":"other","external_name":"other","restriction":"Number"}],"return_type":"Money","visibility":"Public","body":"if (negative? && other.negative?) || (positive? && other.positive?)\n  modulo(other)\nelse\n  (modulo(other)) - copy_with(amount: other)\nend"},"external_var":false},{"html_id":"zero?-instance-method","name":"zero?","doc":"Returns `true` if the money amount is zero.\n\n```\nMoney.new(0).zero?    # => true\nMoney.new(100).zero?  # => false\nMoney.new(-100).zero? # => false\n```","summary":"<p>Returns <code>true</code> if the money amount is zero.</p>","abstract":false,"location":{"filename":"src/money/money/arithmetic.cr","line_number":32,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/arithmetic.cr#L32"},"def":{"name":"zero?","visibility":"Public","body":"amount.zero?"},"external_var":false}]},{"html_id":"money/Money/Bank","path":"Money/Bank.html","kind":"class","full_name":"Money::Bank","name":"Bank","abstract":true,"superclass":{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/bank.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"money/Money/Bank/SingleCurrency","kind":"class","full_name":"Money::Bank::SingleCurrency","name":"SingleCurrency"},{"html_id":"money/Money/Bank/VariableExchange","kind":"class","full_name":"Money::Bank::VariableExchange","name":"VariableExchange"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"constructors":[{"html_id":"new(store:Money::Currency::RateStore|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"store","default_value":"nil","external_name":"store","restriction":"::Money::Currency::RateStore | ::Nil"}],"args_string":"(store : Money::Currency::RateStore | Nil = nil)","args_html":"(store : <a href=\"../Money/Currency/RateStore.html\">Money::Currency::RateStore</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/money/bank.cr","line_number":13,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L13"},"def":{"name":"new","args":[{"name":"store","default_value":"nil","external_name":"store","restriction":"::Money::Currency::RateStore | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(store)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"exchange(from:Money,to:Currency):Money-instance-method","name":"exchange","doc":"Exchanges the given `Money` object to a new `Money` object in\n*to* `Currency`.","summary":"<p>Exchanges the given <code><a href=\"../Money.html\">Money</a></code> object to a new <code><a href=\"../Money.html\">Money</a></code> object in <em>to</em> <code><a href=\"../Money/Currency.html\">Currency</a></code>.</p>","abstract":true,"args":[{"name":"from","external_name":"from","restriction":"Money"},{"name":"to","external_name":"to","restriction":"Currency"}],"args_string":"(from : Money, to : Currency) : Money","args_html":"(from : <a href=\"../Money.html\">Money</a>, to : <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/bank.cr","line_number":29,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L29"},"def":{"name":"exchange","args":[{"name":"from","external_name":"from","restriction":"Money"},{"name":"to","external_name":"to","restriction":"Currency"}],"return_type":"Money","visibility":"Public","body":""},"external_var":false},{"html_id":"exchange_rate(base:Currency,other:Currency):BigDecimal-instance-method","name":"exchange_rate","doc":"Returns the exchange rate between `self` and *other* currency or raises\n`UnknownRateError` if not found.","summary":"<p>Returns the exchange rate between <code>self</code> and <em>other</em> currency or raises <code><a href=\"../Money/UnknownRateError.html\">UnknownRateError</a></code> if not found.</p>","abstract":false,"args":[{"name":"base","external_name":"base","restriction":"Currency"},{"name":"other","external_name":"other","restriction":"Currency"}],"args_string":"(base : Currency, other : Currency) : BigDecimal","args_html":"(base : <a href=\"../Money/Currency.html\">Currency</a>, other : <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../BigDecimal.html\">BigDecimal</a>","location":{"filename":"src/money/bank.cr","line_number":23,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L23"},"def":{"name":"exchange_rate","args":[{"name":"base","external_name":"base","restriction":"Currency"},{"name":"other","external_name":"other","restriction":"Currency"}],"return_type":"BigDecimal","visibility":"Public","body":"base == other ? 1.to_big_d : store[base, other]"},"external_var":false},{"html_id":"exchange_rate?(base:Currency,other:Currency):BigDecimal|Nil-instance-method","name":"exchange_rate?","doc":"Returns the exchange rate between `self` and *other* currency, or `nil` if not found.","summary":"<p>Returns the exchange rate between <code>self</code> and <em>other</em> currency, or <code>nil</code> if not found.</p>","abstract":false,"args":[{"name":"base","external_name":"base","restriction":"Currency"},{"name":"other","external_name":"other","restriction":"Currency"}],"args_string":"(base : Currency, other : Currency) : BigDecimal | Nil","args_html":"(base : <a href=\"../Money/Currency.html\">Currency</a>, other : <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../BigDecimal.html\">BigDecimal</a> | Nil","location":{"filename":"src/money/bank.cr","line_number":17,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L17"},"def":{"name":"exchange_rate?","args":[{"name":"base","external_name":"base","restriction":"Currency"},{"name":"other","external_name":"other","restriction":"Currency"}],"return_type":"BigDecimal | ::Nil","visibility":"Public","body":"base == other ? 1.to_big_d : store[base, other]?"},"external_var":false},{"html_id":"store:Currency::RateStore-instance-method","name":"store","doc":"An exchange `Currency::RateStore` object, used to persist exchange rate pairs.\n\nNOTE: Will return `Money.default_rate_store` if set to `nil` (the default).","summary":"<p>An exchange <code><a href=\"../Money/Currency/RateStore.html\">Currency::RateStore</a></code> object, used to persist exchange rate pairs.</p>","abstract":false,"location":{"filename":"src/money/bank.cr","line_number":9,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L9"},"def":{"name":"store","return_type":"Currency::RateStore","visibility":"Public","body":"@store || Money.default_rate_store"},"external_var":false},{"html_id":"store=(store:Currency::RateStore|Nil)-instance-method","name":"store=","doc":"An exchange `Currency::RateStore` object, used to persist exchange rate pairs.\n\nNOTE: Will return `Money.default_rate_store` if set to `nil` (the default).","summary":"<p>An exchange <code><a href=\"../Money/Currency/RateStore.html\">Currency::RateStore</a></code> object, used to persist exchange rate pairs.</p>","abstract":false,"args":[{"name":"store","external_name":"store","restriction":"Currency::RateStore | ::Nil"}],"args_string":"(store : Currency::RateStore | Nil)","args_html":"(store : <a href=\"../Money/Currency/RateStore.html\">Currency::RateStore</a> | Nil)","location":{"filename":"src/money/bank.cr","line_number":6,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank.cr#L6"},"def":{"name":"store=","args":[{"name":"store","external_name":"store","restriction":"Currency::RateStore | ::Nil"}],"visibility":"Public","body":"@store = store"},"external_var":false}],"types":[{"html_id":"money/Money/Bank/SingleCurrency","path":"Money/Bank/SingleCurrency.html","kind":"class","full_name":"Money::Bank::SingleCurrency","name":"SingleCurrency","abstract":false,"superclass":{"html_id":"money/Money/Bank","kind":"class","full_name":"Money::Bank","name":"Bank"},"ancestors":[{"html_id":"money/Money/Bank","kind":"class","full_name":"Money::Bank","name":"Bank"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/bank/single_currency.cr","line_number":9,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank/single_currency.cr#L9"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money/Bank","kind":"class","full_name":"Money::Bank","name":"Bank"},"doc":"Class to ensure client code is operating in a single currency\nby raising if an exchange attempts to happen.\n\nThis is useful when an application uses multiple currencies but\nit usually deals with only one currency at a time so any arithmetic\nwhere exchanges happen are erroneous. Using this as the default bank\nmeans that that these mistakes don't silently do the wrong thing.","summary":"<p>Class to ensure client code is operating in a single currency by raising if an exchange attempts to happen.</p>","instance_methods":[{"html_id":"exchange(from:Money,to:Currency):Money-instance-method","name":"exchange","doc":"Raises a `DifferentCurrencyError` to remove possibility of accidentally\nexchanging currencies.","summary":"<p>Raises a <code><a href=\"../../Money/DifferentCurrencyError.html\">DifferentCurrencyError</a></code> to remove possibility of accidentally exchanging currencies.</p>","abstract":false,"args":[{"name":"from","external_name":"from","restriction":"Money"},{"name":"to","external_name":"to","restriction":"Currency"}],"args_string":"(from : Money, to : Currency) : Money","args_html":"(from : <a href=\"../../Money.html\">Money</a>, to : <a href=\"../../Money/Currency.html\">Currency</a>) : <a href=\"../../Money.html\">Money</a>","location":{"filename":"src/money/bank/single_currency.cr","line_number":12,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank/single_currency.cr#L12"},"def":{"name":"exchange","args":[{"name":"from","external_name":"from","restriction":"Money"},{"name":"to","external_name":"to","restriction":"Currency"}],"return_type":"Money","visibility":"Public","body":"raise(DifferentCurrencyError.new(\"No exchanging of currencies allowed: #{from} #{from.currency} to #{to}\"))"},"external_var":false}]},{"html_id":"money/Money/Bank/VariableExchange","path":"Money/Bank/VariableExchange.html","kind":"class","full_name":"Money::Bank::VariableExchange","name":"VariableExchange","abstract":false,"superclass":{"html_id":"money/Money/Bank","kind":"class","full_name":"Money::Bank","name":"Bank"},"ancestors":[{"html_id":"money/Money/Bank","kind":"class","full_name":"Money::Bank","name":"Bank"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/bank/variable_exchange.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank/variable_exchange.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money/Bank","kind":"class","full_name":"Money::Bank","name":"Bank"},"instance_methods":[{"html_id":"exchange(from:Money,to:Currency):Money-instance-method","name":"exchange","doc":"Exchanges the given `Money` object to a new `Money` object in\n*to* `Currency`.","summary":"<p>Exchanges the given <code><a href=\"../../Money.html\">Money</a></code> object to a new <code><a href=\"../../Money.html\">Money</a></code> object in <em>to</em> <code><a href=\"../../Money/Currency.html\">Currency</a></code>.</p>","abstract":false,"args":[{"name":"from","external_name":"from","restriction":"Money"},{"name":"to","external_name":"to","restriction":"Currency"}],"args_string":"(from : Money, to : Currency) : Money","args_html":"(from : <a href=\"../../Money.html\">Money</a>, to : <a href=\"../../Money/Currency.html\">Currency</a>) : <a href=\"../../Money.html\">Money</a>","location":{"filename":"src/money/bank/variable_exchange.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/bank/variable_exchange.cr#L3"},"def":{"name":"exchange","args":[{"name":"from","external_name":"from","restriction":"Money"},{"name":"to","external_name":"to","restriction":"Currency"}],"return_type":"Money","visibility":"Public","body":"amount = from.amount * (exchange_rate(from.currency, to))\n\nMoney.new(amount: amount, currency: to, bank: self)\n"},"external_var":false}]}]},{"html_id":"money/Money/Casting","path":"Money/Casting.html","kind":"module","full_name":"Money::Casting","name":"Casting","abstract":false,"locations":[{"filename":"src/money/money/casting.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/casting.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"instance_methods":[{"html_id":"to_big_d:BigDecimal-instance-method","name":"to_big_d","doc":"Returns the amount of money as a `BigDecimal`.\n\n```\nMoney.us_dollar(1_00).to_big_d # => BigDecimal.new(\"1.0\")\n```","summary":"<p>Returns the amount of money as a <code><a href=\"../BigDecimal.html\">BigDecimal</a></code>.</p>","abstract":false,"location":{"filename":"src/money/money/casting.cr","line_number":8,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/casting.cr#L8"},"def":{"name":"to_big_d","return_type":"BigDecimal","visibility":"Public","body":"amount"},"external_var":false},{"html_id":"to_big_f:BigFloat-instance-method","name":"to_big_f","doc":"Returns the amount of money as a `BigFloat`.\n\nWARNING: Floating points cannot guarantee precision. Therefore, this\nfunction should only be used when you no longer need to represent\ncurrency or working with another system that requires floats.\n\n```\nMoney.us_dollar(100).to_big_f # => BigFloat.new(\"1.0\")\n```","summary":"<p>Returns the amount of money as a <code>BigFloat</code>.</p>","abstract":false,"location":{"filename":"src/money/money/casting.cr","line_number":21,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/casting.cr#L21"},"def":{"name":"to_big_f","return_type":"BigFloat","visibility":"Public","body":"amount.to_big_f"},"external_var":false}]},{"html_id":"money/Money/Constructors","path":"Money/Constructors.html","kind":"module","full_name":"Money::Constructors","name":"Constructors","abstract":false,"locations":[{"filename":"src/money/money/constructors.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/constructors.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"instance_methods":[{"html_id":"bitcoin(cents,bank=nil)-instance-method","name":"bitcoin","doc":"Creates a new `Money` object of the given value, using the\nBitcoin cryptocurrency.\n\n```\nMoney.bitcoin(100) # => Money(@amount=0.000001 @currency=\"BTC\")\n```","summary":"<p>Creates a new <code><a href=\"../Money.html\">Money</a></code> object of the given value, using the Bitcoin cryptocurrency.</p>","abstract":false,"args":[{"name":"cents","external_name":"cents","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"args_string":"(cents, bank = nil)","args_html":"(cents, bank = <span class=\"n\">nil</span>)","location":{"filename":"src/money/money/constructors.cr","line_number":52,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/constructors.cr#L52"},"def":{"name":"bitcoin","args":[{"name":"cents","external_name":"cents","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"visibility":"Public","body":"new(cents, \"BTC\", bank)"},"external_var":false},{"html_id":"euro(cents,bank=nil)-instance-method","name":"euro","doc":"Creates a new `Money` object of the given value, using the\nEuro currency.\n\n```\nMoney.euro(100) # => Money(@amount=1.0 @currency=\"EUR\")\n```","summary":"<p>Creates a new <code><a href=\"../Money.html\">Money</a></code> object of the given value, using the Euro currency.</p>","abstract":false,"args":[{"name":"cents","external_name":"cents","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"args_string":"(cents, bank = nil)","args_html":"(cents, bank = <span class=\"n\">nil</span>)","location":{"filename":"src/money/money/constructors.cr","line_number":42,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/constructors.cr#L42"},"def":{"name":"euro","args":[{"name":"cents","external_name":"cents","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"visibility":"Public","body":"new(cents, \"EUR\", bank)"},"external_var":false},{"html_id":"from_amount(amount:Number|String,currency=default_currency,bank=nil):Money-instance-method","name":"from_amount","doc":"Creates a new `Money` object of value given in the *unit* of the given\n*currency*.\n\n```\nMoney.from_amount(23.45, \"USD\") # => Money(@amount=23.45 @currency=\"USD\")\nMoney.from_amount(23.45, \"JPY\") # => Money(@amount=23.0 @currency=\"JPY\")\n```\n\nSee also `#initialize`.","summary":"<p>Creates a new <code><a href=\"../Money.html\">Money</a></code> object of value given in the <em>unit</em> of the given <em>currency</em>.</p>","abstract":false,"args":[{"name":"amount","external_name":"amount","restriction":"Number | String"},{"name":"currency","default_value":"default_currency","external_name":"currency","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"args_string":"(amount : Number | String, currency = default_currency, bank = nil) : Money","args_html":"(amount : Number | String, currency = default_currency, bank = <span class=\"n\">nil</span>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/constructors.cr","line_number":12,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/constructors.cr#L12"},"def":{"name":"from_amount","args":[{"name":"amount","external_name":"amount","restriction":"Number | String"},{"name":"currency","default_value":"default_currency","external_name":"currency","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"return_type":"Money","visibility":"Public","body":"new(amount.to_big_d, currency, bank)"},"external_var":false},{"html_id":"us_dollar(cents,bank=nil)-instance-method","name":"us_dollar","doc":"Creates a new `Money` object of the given value, using the\nAmerican dollar currency.\n\n```\nMoney.us_dollar(100) # => Money(@amount=1.0 @currency=\"USD\")\n```","summary":"<p>Creates a new <code><a href=\"../Money.html\">Money</a></code> object of the given value, using the American dollar currency.</p>","abstract":false,"args":[{"name":"cents","external_name":"cents","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"args_string":"(cents, bank = nil)","args_html":"(cents, bank = <span class=\"n\">nil</span>)","location":{"filename":"src/money/money/constructors.cr","line_number":32,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/constructors.cr#L32"},"def":{"name":"us_dollar","args":[{"name":"cents","external_name":"cents","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"visibility":"Public","body":"new(cents, \"USD\", bank)"},"external_var":false},{"html_id":"zero(currency=default_currency,bank=nil):Money-instance-method","name":"zero","doc":"Creates a new `Money` object with value `0`.\n\n```\nMoney.zero       # => Money(@amount=0.0)\nMoney.zero(:pln) # => Money(@amount=0.0 @currency=\"PLN\")\n```","summary":"<p>Creates a new <code><a href=\"../Money.html\">Money</a></code> object with value <code>0</code>.</p>","abstract":false,"args":[{"name":"currency","default_value":"default_currency","external_name":"currency","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"args_string":"(currency = default_currency, bank = nil) : Money","args_html":"(currency = default_currency, bank = <span class=\"n\">nil</span>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/constructors.cr","line_number":22,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/constructors.cr#L22"},"def":{"name":"zero","args":[{"name":"currency","default_value":"default_currency","external_name":"currency","restriction":""},{"name":"bank","default_value":"nil","external_name":"bank","restriction":""}],"return_type":"Money","visibility":"Public","body":"new(0, currency, bank)"},"external_var":false}]},{"html_id":"money/Money/Context","path":"Money/Context.html","kind":"class","full_name":"Money::Context","name":"Context","abstract":false,"superclass":{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/context.cr","line_number":6,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L6"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"doc":"`Context` class holding global settings for `Money` objects.\nEach `Fiber` has its own `Fiber#money_context` instance.\n\nSee also `Money.same_context_wrapper` and `Money.spawn_with_same_context`.","summary":"<p><code><a href=\"../Money/Context.html\">Context</a></code> class holding global settings for <code><a href=\"../Money.html\">Money</a></code> objects.</p>","instance_methods":[{"html_id":"default_bank:Bank-instance-method","name":"default_bank","doc":"Each `Money` object is associated to a bank object, which is responsible\nfor currency exchange. This property allows you to specify the default\nbank object. The default value for this property is an instance of\n`Bank::VariableExchange`, which allows one to specify custom exchange rates.","summary":"<p>Each <code><a href=\"../Money.html\">Money</a></code> object is associated to a bank object, which is responsible for currency exchange.</p>","abstract":false,"location":{"filename":"src/money/context.cr","line_number":36,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L36"},"def":{"name":"default_bank","return_type":"Bank","visibility":"Public","body":"if (__temp_138 = @default_bank).nil?\n  @default_bank = (Bank::VariableExchange.new)\nelse\n  __temp_138\nend"},"external_var":false},{"html_id":"default_bank=(default_bank:Bank)-instance-method","name":"default_bank=","doc":"Each `Money` object is associated to a bank object, which is responsible\nfor currency exchange. This property allows you to specify the default\nbank object. The default value for this property is an instance of\n`Bank::VariableExchange`, which allows one to specify custom exchange rates.","summary":"<p>Each <code><a href=\"../Money.html\">Money</a></code> object is associated to a bank object, which is responsible for currency exchange.</p>","abstract":false,"args":[{"name":"default_bank","external_name":"default_bank","restriction":"Bank"}],"args_string":"(default_bank : Bank)","args_html":"(default_bank : <a href=\"../Money/Bank.html\">Bank</a>)","location":{"filename":"src/money/context.cr","line_number":36,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L36"},"def":{"name":"default_bank=","args":[{"name":"default_bank","external_name":"default_bank","restriction":"Bank"}],"visibility":"Public","body":"@default_bank = default_bank"},"external_var":false},{"html_id":"default_currency:Currency-instance-method","name":"default_currency","doc":"Default currency for creating new `Money` object.","summary":"<p>Default currency for creating new <code><a href=\"../Money.html\">Money</a></code> object.</p>","abstract":false,"location":{"filename":"src/money/context.cr","line_number":25,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L25"},"def":{"name":"default_currency","return_type":"Currency","visibility":"Public","body":"if (__temp_137 = @default_currency).nil?\n  @default_currency = (Currency.find(\"USD\"))\nelse\n  __temp_137\nend"},"external_var":false},{"html_id":"default_currency=(currency_code:String|Symbol)-instance-method","name":"default_currency=","doc":"Default currency for creating new `Money` object.","summary":"<p>Default currency for creating new <code><a href=\"../Money.html\">Money</a></code> object.</p>","abstract":false,"args":[{"name":"currency_code","external_name":"currency_code","restriction":"String | Symbol"}],"args_string":"(currency_code : String | Symbol)","args_html":"(currency_code : String | Symbol)","location":{"filename":"src/money/context.cr","line_number":28,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L28"},"def":{"name":"default_currency=","args":[{"name":"currency_code","external_name":"currency_code","restriction":"String | Symbol"}],"visibility":"Public","body":"self.default_currency = Currency.find(currency_code)"},"external_var":false},{"html_id":"default_currency=(default_currency:Currency)-instance-method","name":"default_currency=","doc":"Default currency for creating new `Money` object.","summary":"<p>Default currency for creating new <code><a href=\"../Money.html\">Money</a></code> object.</p>","abstract":false,"args":[{"name":"default_currency","external_name":"default_currency","restriction":"Currency"}],"args_string":"(default_currency : Currency)","args_html":"(default_currency : <a href=\"../Money/Currency.html\">Currency</a>)","location":{"filename":"src/money/context.cr","line_number":25,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L25"},"def":{"name":"default_currency=","args":[{"name":"default_currency","external_name":"default_currency","restriction":"Currency"}],"visibility":"Public","body":"@default_currency = default_currency"},"external_var":false},{"html_id":"default_rate_store:Currency::RateStore-instance-method","name":"default_rate_store","doc":"Default currency rate store used by `Bank` objects. It defaults to using an\nin-memory, concurrency-safe, store instance for storing exchange rates.","summary":"<p>Default currency rate store used by <code><a href=\"../Money/Bank.html\">Bank</a></code> objects.</p>","abstract":false,"location":{"filename":"src/money/context.cr","line_number":40,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L40"},"def":{"name":"default_rate_store","return_type":"Currency::RateStore","visibility":"Public","body":"if (__temp_139 = @default_rate_store).nil?\n  @default_rate_store = (Currency::RateStore::Memory.new)\nelse\n  __temp_139\nend"},"external_var":false},{"html_id":"default_rate_store=(default_rate_store:Currency::RateStore)-instance-method","name":"default_rate_store=","doc":"Default currency rate store used by `Bank` objects. It defaults to using an\nin-memory, concurrency-safe, store instance for storing exchange rates.","summary":"<p>Default currency rate store used by <code><a href=\"../Money/Bank.html\">Bank</a></code> objects.</p>","abstract":false,"args":[{"name":"default_rate_store","external_name":"default_rate_store","restriction":"Currency::RateStore"}],"args_string":"(default_rate_store : Currency::RateStore)","args_html":"(default_rate_store : <a href=\"../Money/Currency/RateStore.html\">Currency::RateStore</a>)","location":{"filename":"src/money/context.cr","line_number":40,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L40"},"def":{"name":"default_rate_store=","args":[{"name":"default_rate_store","external_name":"default_rate_store","restriction":"Currency::RateStore"}],"visibility":"Public","body":"@default_rate_store = default_rate_store"},"external_var":false},{"html_id":"infinite_precision=(infinite_precision:Bool)-instance-method","name":"infinite_precision=","doc":"Use this to control infinite precision cents.","summary":"<p>Use this to control infinite precision cents.</p>","abstract":false,"args":[{"name":"infinite_precision","external_name":"infinite_precision","restriction":"Bool"}],"args_string":"(infinite_precision : Bool)","args_html":"(infinite_precision : Bool)","location":{"filename":"src/money/context.cr","line_number":19,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L19"},"def":{"name":"infinite_precision=","args":[{"name":"infinite_precision","external_name":"infinite_precision","restriction":"Bool"}],"visibility":"Public","body":"@infinite_precision = infinite_precision"},"external_var":false},{"html_id":"infinite_precision?:Bool-instance-method","name":"infinite_precision?","doc":"Use this to control infinite precision cents.","summary":"<p>Use this to control infinite precision cents.</p>","abstract":false,"location":{"filename":"src/money/context.cr","line_number":19,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L19"},"def":{"name":"infinite_precision?","return_type":"Bool","visibility":"Public","body":"@infinite_precision"},"external_var":false},{"html_id":"rounding_mode:Number::RoundingMode-instance-method","name":"rounding_mode","doc":"Default rounding mode.","summary":"<p>Default rounding mode.</p>","abstract":false,"location":{"filename":"src/money/context.cr","line_number":22,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L22"},"def":{"name":"rounding_mode","return_type":"Number::RoundingMode","visibility":"Public","body":"@rounding_mode"},"external_var":false},{"html_id":"rounding_mode=(rounding_mode:Number::RoundingMode)-instance-method","name":"rounding_mode=","doc":"Default rounding mode.","summary":"<p>Default rounding mode.</p>","abstract":false,"args":[{"name":"rounding_mode","external_name":"rounding_mode","restriction":"Number::RoundingMode"}],"args_string":"(rounding_mode : Number::RoundingMode)","args_html":"(rounding_mode : Number::RoundingMode)","location":{"filename":"src/money/context.cr","line_number":22,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/context.cr#L22"},"def":{"name":"rounding_mode=","args":[{"name":"rounding_mode","external_name":"rounding_mode","restriction":"Number::RoundingMode"}],"visibility":"Public","body":"@rounding_mode = rounding_mode"},"external_var":false}]},{"html_id":"money/Money/Currency","path":"Money/Currency.html","kind":"class","full_name":"Money::Currency","name":"Currency","abstract":false,"superclass":{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"money/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/currency.cr","line_number":10,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L10"},{"filename":"src/money/currency/enumeration.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L2"},{"filename":"src/money/currency/json.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/json.cr#L3"},{"filename":"src/money/currency/loader.cr","line_number":4,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/loader.cr#L4"},{"filename":"src/money/currency/rate.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate.cr#L1"},{"filename":"src/money/currency/rate_store.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L1"},{"filename":"src/money/currency/rate_store/file.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/file.cr#L3"},{"filename":"src/money/currency/rate_store/memory.cr","line_number":1,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/memory.cr#L1"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"money/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[{"html_id":"money/Money/Currency/Enumeration","kind":"module","full_name":"Money::Currency::Enumeration","name":"Enumeration"},{"html_id":"money/Money/Currency/Loader","kind":"module","full_name":"Money::Currency::Loader","name":"Loader"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"doc":"Represents a specific currency unit.\n\nSee [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217).","summary":"<p>Represents a specific currency unit.</p>","class_methods":[{"html_id":"reset!:Nil-class-method","name":"reset!","doc":"Resets all registered currencies to their defaults.","summary":"<p>Resets all registered currencies to their defaults.</p>","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":44,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L44"},"def":{"name":"reset!","return_type":"Nil","visibility":"Public","body":"@@table_mutex.synchronize do\n  @@table = load_currencies\nend"},"external_var":false},{"html_id":"table:Hash(String,Currency)-class-method","name":"table","doc":"List of known currencies.","summary":"<p>List of known currencies.</p>","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":21,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L21"},"def":{"name":"table","return_type":"Hash(String, Currency)","visibility":"Public","body":"@@table_mutex.synchronize do\n  @@table || (@@table = load_currencies)\nend"},"external_var":false},{"html_id":"unregister(currency:String|Symbol|Currency):Currency|Nil-class-method","name":"unregister","doc":"Unregisters a currency.","summary":"<p>Unregisters a currency.</p>","abstract":false,"args":[{"name":"currency","external_name":"currency","restriction":"String | Symbol | Currency"}],"args_string":"(currency : String | Symbol | Currency) : Currency | Nil","args_html":"(currency : String | Symbol | <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../Money/Currency.html\">Currency</a> | Nil","location":{"filename":"src/money/currency.cr","line_number":35,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L35"},"def":{"name":"unregister","args":[{"name":"currency","external_name":"currency","restriction":"String | Symbol | Currency"}],"return_type":"Currency | ::Nil","visibility":"Public","body":"if currency = wrap?(currency)\n  @@table_mutex.synchronize do\n    table.delete(currency.id)\n  end\nend"},"external_var":false},{"html_id":"wrap?(value:String|Symbol|Currency):Currency|Nil-class-method","name":"wrap?","doc":"Wraps the *value* in a `Currency` object.\n\n```\nc1 = Money::Currency.find(:usd)\nMoney::Currency.wrap?(c1)    # => #<Money::Currency @id=\"usd\">\nMoney::Currency.wrap?(\"usd\") # => #<Money::Currency @id=\"usd\">\nMoney::Currency.wrap?(:usd)  # => #<Money::Currency @id=\"usd\">\nMoney::Currency.wrap?(:foo)  # => nil\n```","summary":"<p>Wraps the <em>value</em> in a <code><a href=\"../Money/Currency.html\">Currency</a></code> object.</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"String | Symbol | Currency"}],"args_string":"(value : String | Symbol | Currency) : Currency | Nil","args_html":"(value : String | Symbol | <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../Money/Currency.html\">Currency</a> | Nil","location":{"filename":"src/money/currency.cr","line_number":59,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L59"},"def":{"name":"wrap?","args":[{"name":"value","external_name":"value","restriction":"String | Symbol | Currency"}],"return_type":"Currency | ::Nil","visibility":"Public","body":"case value\nwhen String, Symbol\n  find?(value)\nwhen Currency\n  value\nend"},"external_var":false}],"constructors":[{"html_id":"new(pull:JSON::PullParser)-class-method","name":"new","abstract":false,"args":[{"name":"pull","external_name":"pull","restriction":"JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/money/currency/json.cr","line_number":6,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/json.cr#L6"},"def":{"name":"new","args":[{"name":"pull","external_name":"pull","restriction":"JSON::PullParser"}],"visibility":"Public","body":"case pull.kind\nwhen .string?\n  find(pull.read_string)\nelse\n  previous_def(pull)\nend"},"external_var":false},{"html_id":"new(*,priority:Int32|Nil=nil,iso_numeric:UInt32|Nil=nil,code:String,name:Nil|String=nil,symbol:Nil|String=nil,disambiguate_symbol:Nil|String=nil,alternate_symbols:Nil|Array(String)=nil,subunit:Nil|String=nil,subunit_to_unit:UInt64,symbol_first:Bool|Nil=nil,html_entity:Nil|String=nil,decimal_mark:Nil|String=nil,thousands_separator:Nil|String=nil,smallest_denomination:UInt32|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"","external_name":"","restriction":""},{"name":"priority","default_value":"nil","external_name":"priority","restriction":"::Int32 | ::Nil"},{"name":"iso_numeric","default_value":"nil","external_name":"iso_numeric","restriction":"::UInt32 | ::Nil"},{"name":"code","external_name":"code","restriction":"::String"},{"name":"name","default_value":"nil","external_name":"name","restriction":"::Nil | ::String"},{"name":"symbol","default_value":"nil","external_name":"symbol","restriction":"::Nil | ::String"},{"name":"disambiguate_symbol","default_value":"nil","external_name":"disambiguate_symbol","restriction":"::Nil | ::String"},{"name":"alternate_symbols","default_value":"nil","external_name":"alternate_symbols","restriction":"::Nil | ::Array(::String)"},{"name":"subunit","default_value":"nil","external_name":"subunit","restriction":"::Nil | ::String"},{"name":"subunit_to_unit","external_name":"subunit_to_unit","restriction":"::UInt64"},{"name":"symbol_first","default_value":"nil","external_name":"symbol_first","restriction":"::Bool | ::Nil"},{"name":"html_entity","default_value":"nil","external_name":"html_entity","restriction":"::Nil | ::String"},{"name":"decimal_mark","default_value":"nil","external_name":"decimal_mark","restriction":"::Nil | ::String"},{"name":"thousands_separator","default_value":"nil","external_name":"thousands_separator","restriction":"::Nil | ::String"},{"name":"smallest_denomination","default_value":"nil","external_name":"smallest_denomination","restriction":"::UInt32 | ::Nil"}],"args_string":"(*, priority : Int32 | Nil = nil, iso_numeric : UInt32 | Nil = nil, code : String, name : Nil | String = nil, symbol : Nil | String = nil, disambiguate_symbol : Nil | String = nil, alternate_symbols : Nil | Array(String) = nil, subunit : Nil | String = nil, subunit_to_unit : UInt64, symbol_first : Bool | Nil = nil, html_entity : Nil | String = nil, decimal_mark : Nil | String = nil, thousands_separator : Nil | String = nil, smallest_denomination : UInt32 | Nil = nil)","args_html":"(*, priority : Int32 | Nil = <span class=\"n\">nil</span>, iso_numeric : UInt32 | Nil = <span class=\"n\">nil</span>, code : String, name : Nil | String = <span class=\"n\">nil</span>, symbol : Nil | String = <span class=\"n\">nil</span>, disambiguate_symbol : Nil | String = <span class=\"n\">nil</span>, alternate_symbols : Nil | Array(String) = <span class=\"n\">nil</span>, subunit : Nil | String = <span class=\"n\">nil</span>, subunit_to_unit : UInt64, symbol_first : Bool | Nil = <span class=\"n\">nil</span>, html_entity : Nil | String = <span class=\"n\">nil</span>, decimal_mark : Nil | String = <span class=\"n\">nil</span>, thousands_separator : Nil | String = <span class=\"n\">nil</span>, smallest_denomination : UInt32 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/money/currency.cr","line_number":90,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L90"},"def":{"name":"new","args":[{"name":"","external_name":"","restriction":""},{"name":"priority","default_value":"nil","external_name":"priority","restriction":"::Int32 | ::Nil"},{"name":"iso_numeric","default_value":"nil","external_name":"iso_numeric","restriction":"::UInt32 | ::Nil"},{"name":"code","external_name":"code","restriction":"::String"},{"name":"name","default_value":"nil","external_name":"name","restriction":"::Nil | ::String"},{"name":"symbol","default_value":"nil","external_name":"symbol","restriction":"::Nil | ::String"},{"name":"disambiguate_symbol","default_value":"nil","external_name":"disambiguate_symbol","restriction":"::Nil | ::String"},{"name":"alternate_symbols","default_value":"nil","external_name":"alternate_symbols","restriction":"::Nil | ::Array(::String)"},{"name":"subunit","default_value":"nil","external_name":"subunit","restriction":"::Nil | ::String"},{"name":"subunit_to_unit","external_name":"subunit_to_unit","restriction":"::UInt64"},{"name":"symbol_first","default_value":"nil","external_name":"symbol_first","restriction":"::Bool | ::Nil"},{"name":"html_entity","default_value":"nil","external_name":"html_entity","restriction":"::Nil | ::String"},{"name":"decimal_mark","default_value":"nil","external_name":"decimal_mark","restriction":"::Nil | ::String"},{"name":"thousands_separator","default_value":"nil","external_name":"thousands_separator","restriction":"::Nil | ::String"},{"name":"smallest_denomination","default_value":"nil","external_name":"smallest_denomination","restriction":"::UInt32 | ::Nil"}],"splat_index":0,"visibility":"Public","body":"_ = allocate\n_.initialize(priority: priority, iso_numeric: iso_numeric, code: code, name: name, symbol: symbol, disambiguate_symbol: disambiguate_symbol, alternate_symbols: alternate_symbols, subunit: subunit, subunit_to_unit: subunit_to_unit, symbol_first: symbol_first, html_entity: html_entity, decimal_mark: decimal_mark, thousands_separator: thousands_separator, smallest_denomination: smallest_denomination)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false},{"html_id":"register(currency:Currency):Currency-class-method","name":"register","doc":"Registers a new currency.","summary":"<p>Registers a new currency.</p>","abstract":false,"args":[{"name":"currency","external_name":"currency","restriction":"Currency"}],"args_string":"(currency : Currency) : Currency","args_html":"(currency : <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../Money/Currency.html\">Currency</a>","location":{"filename":"src/money/currency.cr","line_number":28,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L28"},"def":{"name":"register","args":[{"name":"currency","external_name":"currency","restriction":"Currency"}],"return_type":"Currency","visibility":"Public","body":"@@table_mutex.synchronize do\n  table[currency.id] = currency\nend"},"external_var":false},{"html_id":"wrap(value:String|Symbol|Currency):Currency-class-method","name":"wrap","doc":"Wraps the *value* in a `Currency` object.\n\n```\nc1 = Money::Currency.find(:usd)\nMoney::Currency.wrap?(c1)    # => #<Money::Currency @id=\"usd\">\nMoney::Currency.wrap?(\"usd\") # => #<Money::Currency @id=\"usd\">\nMoney::Currency.wrap?(:usd)  # => #<Money::Currency @id=\"usd\">\nMoney::Currency.wrap?(:foo)  # => nil\n```","summary":"<p>Wraps the <em>value</em> in a <code><a href=\"../Money/Currency.html\">Currency</a></code> object.</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"String | Symbol | Currency"}],"args_string":"(value : String | Symbol | Currency) : Currency","args_html":"(value : String | Symbol | <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../Money/Currency.html\">Currency</a>","location":{"filename":"src/money/currency.cr","line_number":67,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L67"},"def":{"name":"wrap","args":[{"name":"value","external_name":"value","restriction":"String | Symbol | Currency"}],"return_type":"Currency","visibility":"Public","body":"(wrap?(value)) || (raise(UnknownCurrencyError.new(\"Can't find currency: #{value}\")))"},"external_var":false}],"instance_methods":[{"html_id":"<=>(other:Currency):Int32-instance-method","name":"<=>","doc":"Compares `self` with *other* currency against the value of\n`priority` and `id` attributes.","summary":"<p>Compares <code>self</code> with <em>other</em> currency against the value of <code><a href=\"../Money/Currency.html#priority%3AInt32%7CNil-instance-method\">#priority</a></code> and <code><a href=\"../Money/Currency.html#id%3AString-instance-method\">#id</a></code> attributes.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Currency"}],"args_string":"(other : Currency) : Int32","args_html":"(other : <a href=\"../Money/Currency.html\">Currency</a>) : Int32","location":{"filename":"src/money/currency.cr","line_number":135,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L135"},"def":{"name":"<=>","args":[{"name":"other","external_name":"other","restriction":"Currency"}],"return_type":"Int32","visibility":"Public","body":"case {(priority = self.priority), (other_priority = other.priority)}\nin {Int32, Int32}\n  comparison = priority <=> other_priority\n  if comparison.zero?\n    comparison = id <=> other.id\n  end\n  comparison\nin {Int32, nil}\n  -1\nin {nil, Int32}\n  1\nin {nil, nil}\n  id <=> other.id\nend"},"external_var":false},{"html_id":"<=>(other:String|Symbol):Int32-instance-method","name":"<=>","doc":"Compares `self` with *other* currency against the value of id` attribute.","summary":"<p>Compares <code>self</code> with <em>other</em> currency against the value of id` attribute.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"String | Symbol"}],"args_string":"(other : String | Symbol) : Int32","args_html":"(other : String | Symbol) : Int32","location":{"filename":"src/money/currency.cr","line_number":149,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L149"},"def":{"name":"<=>","args":[{"name":"other","external_name":"other","restriction":"String | Symbol"}],"return_type":"Int32","visibility":"Public","body":"id.compare(other.to_s, case_insensitive: true)"},"external_var":false},{"html_id":"==(other:self)-instance-method","name":"==","doc":"Returns `true` if this reference is the same as *other*. Invokes `same?`.","summary":"<p>Returns <code>true</code> if this reference is the same as <em>other</em>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"self"}],"args_string":"(other : self)","args_html":"(other : <span class=\"k\">self</span>)","def":{"name":"==","args":[{"name":"other","external_name":"other","restriction":"self"}],"visibility":"Public","body":"if same?(other)\n  return true\nend\n\n\nif id == other.id\nelse\n  return false\nend\n\ntrue\n"},"external_var":false},{"html_id":"alternate_symbols:Array(String)|Nil-instance-method","name":"alternate_symbols","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":78,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L78"},"def":{"name":"alternate_symbols","return_type":"Array(String) | ::Nil","visibility":"Public","body":"@alternate_symbols"},"external_var":false},{"html_id":"code:String-instance-method","name":"code","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":74,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L74"},"def":{"name":"code","return_type":"String","visibility":"Public","body":"@code"},"external_var":false},{"html_id":"decimal_mark:String|Nil-instance-method","name":"decimal_mark","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":83,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L83"},"def":{"name":"decimal_mark","return_type":"String | ::Nil","visibility":"Public","body":"@decimal_mark"},"external_var":false},{"html_id":"decimal_places:Int32-instance-method","name":"decimal_places","doc":"Alias of `#exponent`.","summary":"<p>Alias of <code><a href=\"../Money/Currency.html#exponent%3AInt32-instance-method\">#exponent</a></code>.</p>","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":122,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L122"},"def":{"name":"decimal_places","return_type":"Int32","visibility":"Public","body":"exponent"},"external_var":false},{"html_id":"disambiguate_symbol:String|Nil-instance-method","name":"disambiguate_symbol","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":77,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L77"},"def":{"name":"disambiguate_symbol","return_type":"String | ::Nil","visibility":"Public","body":"@disambiguate_symbol"},"external_var":false},{"html_id":"exponent:Int32-instance-method","name":"exponent","doc":"Returns the relation between subunit and unit as a base 10 exponent.\n\nNOTE: MGA and MRU are exceptions and are rounded to 1.\n\nSee [Active_codes](https://en.wikipedia.org/wiki/ISO_4217#Active_codes).","summary":"<p>Returns the relation between subunit and unit as a base 10 exponent.</p>","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":116,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L116"},"def":{"name":"exponent","return_type":"Int32","visibility":"Public","body":"(Math.log10(subunit_to_unit)).round.to_i"},"external_var":false},{"html_id":"hash(hasher)-instance-method","name":"hash","doc":"See `Object#hash(hasher)`","summary":"<p>See <code>Object#hash(hasher)</code></p>","abstract":false,"args":[{"name":"hasher","external_name":"hasher","restriction":""}],"args_string":"(hasher)","args_html":"(hasher)","def":{"name":"hash","args":[{"name":"hasher","external_name":"hasher","restriction":""}],"visibility":"Public","body":"hasher = id.hash(hasher)\n\nhasher\n"},"external_var":false},{"html_id":"html_entity:String|Nil-instance-method","name":"html_entity","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":82,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L82"},"def":{"name":"html_entity","return_type":"String | ::Nil","visibility":"Public","body":"@html_entity"},"external_var":false},{"html_id":"id:String-instance-method","name":"id","doc":"Currency ID, for time being lower-cased `#code`.","summary":"<p>Currency ID, for time being lower-cased <code><a href=\"../Money/Currency.html#code%3AString-instance-method\">#code</a></code>.</p>","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":88,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L88"},"def":{"name":"id","return_type":"String","visibility":"Public","body":"if (__temp_143 = @id).nil?\n  @id = (code.downcase)\nelse\n  __temp_143\nend"},"external_var":false},{"html_id":"iso?:Bool-instance-method","name":"iso?","doc":"Returns `true` if iso currency.\n\nSee also `#iso_numeric`.","summary":"<p>Returns <code>true</code> if iso currency.</p>","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":129,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L129"},"def":{"name":"iso?","return_type":"Bool","visibility":"Public","body":"!!iso_numeric"},"external_var":false},{"html_id":"iso_numeric:UInt32|Nil-instance-method","name":"iso_numeric","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":73,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L73"},"def":{"name":"iso_numeric","return_type":"UInt32 | ::Nil","visibility":"Public","body":"@iso_numeric"},"external_var":false},{"html_id":"name:String|Nil-instance-method","name":"name","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":75,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L75"},"def":{"name":"name","return_type":"String | ::Nil","visibility":"Public","body":"@name"},"external_var":false},{"html_id":"priority:Int32|Nil-instance-method","name":"priority","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":72,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L72"},"def":{"name":"priority","return_type":"Int32 | ::Nil","visibility":"Public","body":"@priority"},"external_var":false},{"html_id":"smallest_denomination:UInt32|Nil-instance-method","name":"smallest_denomination","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":85,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L85"},"def":{"name":"smallest_denomination","return_type":"UInt32 | ::Nil","visibility":"Public","body":"@smallest_denomination"},"external_var":false},{"html_id":"subunit:String|Nil-instance-method","name":"subunit","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":79,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L79"},"def":{"name":"subunit","return_type":"String | ::Nil","visibility":"Public","body":"@subunit"},"external_var":false},{"html_id":"subunit_to_unit:UInt64-instance-method","name":"subunit_to_unit","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":80,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L80"},"def":{"name":"subunit_to_unit","return_type":"UInt64","visibility":"Public","body":"@subunit_to_unit"},"external_var":false},{"html_id":"symbol:String|Nil-instance-method","name":"symbol","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":76,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L76"},"def":{"name":"symbol","return_type":"String | ::Nil","visibility":"Public","body":"@symbol"},"external_var":false},{"html_id":"symbol_first?:Bool|Nil-instance-method","name":"symbol_first?","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":81,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L81"},"def":{"name":"symbol_first?","return_type":"Bool | ::Nil","visibility":"Public","body":"@symbol_first"},"external_var":false},{"html_id":"thousands_separator:String|Nil-instance-method","name":"thousands_separator","abstract":false,"location":{"filename":"src/money/currency.cr","line_number":84,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L84"},"def":{"name":"thousands_separator","return_type":"String | ::Nil","visibility":"Public","body":"@thousands_separator"},"external_var":false},{"html_id":"to_s(io:IO):Nil-instance-method","name":"to_s","doc":"Appends a string representation corresponding to the `#code` property\nto the given *io*.\n\n```\nMoney::Currency.find(:usd).to_s # => \"USD\"\nMoney::Currency.find(:eur).to_s # => \"EUR\"\n```","summary":"<p>Appends a string representation corresponding to the <code><a href=\"../Money/Currency.html#code%3AString-instance-method\">#code</a></code> property to the given <em>io</em>.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/money/currency.cr","line_number":160,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency.cr#L160"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"io << code"},"external_var":false}],"types":[{"html_id":"money/Money/Currency/Enumeration","path":"Money/Currency/Enumeration.html","kind":"module","full_name":"Money::Currency::Enumeration","name":"Enumeration","abstract":false,"ancestors":[{"html_id":"money/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"locations":[{"filename":"src/money/currency/enumeration.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L3"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"money/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"namespace":{"html_id":"money/Money/Currency","kind":"class","full_name":"Money::Currency","name":"Currency"},"instance_methods":[{"html_id":"[](key:String|Symbol):Currency-instance-method","name":"[]","doc":"Alias of `#find`.","summary":"<p>Alias of <code><a href=\"../../Money/Currency/Enumeration.html#find%28key%3AString%7CSymbol%29%3ACurrency-instance-method\">#find</a></code>.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"args_string":"(key : String | Symbol) : Currency","args_html":"(key : String | Symbol) : <a href=\"../../Money/Currency.html\">Currency</a>","location":{"filename":"src/money/currency/enumeration.cr","line_number":39,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L39"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"return_type":"Currency","visibility":"Public","body":"find(key)"},"external_var":false},{"html_id":"[]?(key:String|Symbol):Currency|Nil-instance-method","name":"[]?","doc":"Alias of `#find?`.","summary":"<p>Alias of <code><a href=\"../../Money/Currency/Enumeration.html#find%3F%28key%3AString%7CSymbol%29%3ACurrency%7CNil-instance-method\">#find?</a></code>.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"args_string":"(key : String | Symbol) : Currency | Nil","args_html":"(key : String | Symbol) : <a href=\"../../Money/Currency.html\">Currency</a> | Nil","location":{"filename":"src/money/currency/enumeration.cr","line_number":21,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L21"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"return_type":"Currency | ::Nil","visibility":"Public","body":"find?(key)"},"external_var":false},{"html_id":"all:Array(Currency)-instance-method","name":"all","doc":"Returns a sorted list of all registered currencies.","summary":"<p>Returns a sorted list of all registered currencies.</p>","abstract":false,"location":{"filename":"src/money/currency/enumeration.cr","line_number":44,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L44"},"def":{"name":"all","return_type":"Array(Currency)","visibility":"Public","body":"@@table_mutex.synchronize do\n  table.values.sort!\nend"},"external_var":false},{"html_id":"each(&:Currency->_):Nil-instance-method","name":"each","doc":"Iterates over all registered currencies.","summary":"<p>Iterates over all registered currencies.</p>","abstract":false,"location":{"filename":"src/money/currency/enumeration.cr","line_number":51,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L51"},"def":{"name":"each","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(Currency -> _)"},"return_type":"Nil","visibility":"Public","body":"all.each do |currency|\n  yield currency\nend"},"external_var":false},{"html_id":"find(key:String|Symbol):Currency-instance-method","name":"find","doc":"Lookup a currency with given *key* an returns a `Currency` instance on\nsuccess, raises `UnknownCurrencyError` otherwise.\n\n```\nMoney::Currency.find(\"EUR\") # => #<Money::Currency @id=\"eur\">\nMoney::Currency.find(\"FOO\") # => raises UnknownCurrencyError\n```","summary":"<p>Lookup a currency with given <em>key</em> an returns a <code><a href=\"../../Money/Currency.html\">Currency</a></code> instance on success, raises <code><a href=\"../../Money/UnknownCurrencyError.html\">UnknownCurrencyError</a></code> otherwise.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"args_string":"(key : String | Symbol) : Currency","args_html":"(key : String | Symbol) : <a href=\"../../Money/Currency.html\">Currency</a>","location":{"filename":"src/money/currency/enumeration.cr","line_number":32,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L32"},"def":{"name":"find","args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"return_type":"Currency","visibility":"Public","body":"(find?(key)) || (raise(UnknownCurrencyError.new(\"Can't find currency: #{key}\")))"},"external_var":false},{"html_id":"find?(key:String|Symbol):Currency|Nil-instance-method","name":"find?","doc":"Lookup a currency with given *key* an returns a `Currency` instance on\nsuccess, `nil` otherwise.\n\n```\nMoney::Currency.find(\"EUR\") # => #<Money::Currency @id=\"eur\">\nMoney::Currency.find(\"FOO\") # => nil\n```","summary":"<p>Lookup a currency with given <em>key</em> an returns a <code><a href=\"../../Money/Currency.html\">Currency</a></code> instance on success, <code>nil</code> otherwise.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"args_string":"(key : String | Symbol) : Currency | Nil","args_html":"(key : String | Symbol) : <a href=\"../../Money/Currency.html\">Currency</a> | Nil","location":{"filename":"src/money/currency/enumeration.cr","line_number":13,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/enumeration.cr#L13"},"def":{"name":"find?","args":[{"name":"key","external_name":"key","restriction":"String | Symbol"}],"return_type":"Currency | ::Nil","visibility":"Public","body":"@@table_mutex.synchronize do\n  table[key.to_s.downcase]?\nend"},"external_var":false}]},{"html_id":"money/Money/Currency/Loader","path":"Money/Currency/Loader.html","kind":"module","full_name":"Money::Currency::Loader","name":"Loader","abstract":false,"locations":[{"filename":"src/money/currency/loader.cr","line_number":5,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/loader.cr#L5"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money/Currency","kind":"class","full_name":"Money::Currency","name":"Currency"},"instance_methods":[{"html_id":"load_currencies-instance-method","name":"load_currencies","doc":"Loads and returns the currencies stored in JSON files\ninside of `data/currencies` directory.","summary":"<p>Loads and returns the currencies stored in JSON files inside of <code>data/currencies</code> directory.</p>","abstract":false,"location":{"filename":"src/money/currency/loader.cr","line_number":10,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/loader.cr#L10"},"def":{"name":"load_currencies","visibility":"Public","body":"currency_table = {} of String => Currency\nDir.each_child(DATA_PATH) do |filename|\n  (parse_currency_file(filename)).try do |currency|\n    currency_table[currency.id] = currency\n  end\nend\ncurrency_table\n"},"external_var":false}]},{"html_id":"money/Money/Currency/Rate","path":"Money/Currency/Rate.html","kind":"struct","full_name":"Money::Currency::Rate","name":"Rate","abstract":false,"superclass":{"html_id":"money/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"money/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"money/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"money/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/currency/json.cr","line_number":15,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/json.cr#L15"},{"filename":"src/money/currency/rate.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"money/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"namespace":{"html_id":"money/Money/Currency","kind":"class","full_name":"Money::Currency","name":"Currency"},"constructors":[{"html_id":"new(from:Currency,to:Currency,value:BigDecimal)-class-method","name":"new","abstract":false,"args":[{"name":"from","external_name":"from","restriction":"Currency"},{"name":"to","external_name":"to","restriction":"Currency"},{"name":"value","external_name":"value","restriction":"BigDecimal"}],"args_string":"(from : Currency, to : Currency, value : BigDecimal)","args_html":"(from : <a href=\"../../Money/Currency.html\">Currency</a>, to : <a href=\"../../Money/Currency.html\">Currency</a>, value : <a href=\"../../BigDecimal.html\">BigDecimal</a>)","location":{"filename":"src/money/currency/rate.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate.cr#L2"},"def":{"name":"new","args":[{"name":"from","external_name":"from","restriction":"Currency"},{"name":"to","external_name":"to","restriction":"Currency"},{"name":"value","external_name":"value","restriction":"BigDecimal"}],"visibility":"Public","body":"_ = allocate\n_.initialize(from, to, value)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false},{"html_id":"new(pull:JSON::PullParser)-class-method","name":"new","abstract":false,"args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/money/currency/json.cr","line_number":16,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/json.cr#L16"},"def":{"name":"new","args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"visibility":"Public","body":"new_from_json_pull_parser(pull)"},"external_var":false}],"instance_methods":[{"html_id":"clone-instance-method","name":"clone","abstract":false,"location":{"filename":"src/money/currency/rate.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate.cr#L2"},"def":{"name":"clone","visibility":"Public","body":"self.class.new(@from.clone, @to.clone, @value.clone)"},"external_var":false},{"html_id":"copy_with(from_from=@from,to_to=@to,value_value=@value)-instance-method","name":"copy_with","abstract":false,"args":[{"name":"_from","default_value":"@from","external_name":"from","restriction":""},{"name":"_to","default_value":"@to","external_name":"to","restriction":""},{"name":"_value","default_value":"@value","external_name":"value","restriction":""}],"args_string":"(from _from = @from, to _to = @to, value _value = @value)","args_html":"(from _from = @from, to _to = @to, value _value = @value)","location":{"filename":"src/money/currency/rate.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate.cr#L2"},"def":{"name":"copy_with","args":[{"name":"_from","default_value":"@from","external_name":"from","restriction":""},{"name":"_to","default_value":"@to","external_name":"to","restriction":""},{"name":"_value","default_value":"@value","external_name":"value","restriction":""}],"visibility":"Public","body":"self.class.new(_from, _to, _value)"},"external_var":false},{"html_id":"from:Currency-instance-method","name":"from","abstract":false,"def":{"name":"from","return_type":"Currency","visibility":"Public","body":"@from"},"external_var":false},{"html_id":"to:Currency-instance-method","name":"to","abstract":false,"def":{"name":"to","return_type":"Currency","visibility":"Public","body":"@to"},"external_var":false},{"html_id":"to_json(json:JSON::Builder)-instance-method","name":"to_json","abstract":false,"args":[{"name":"json","external_name":"json","restriction":"JSON::Builder"}],"args_string":"(json : JSON::Builder)","args_html":"(json : JSON::Builder)","location":{"filename":"src/money/currency/json.cr","line_number":18,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/json.cr#L18"},"def":{"name":"to_json","args":[{"name":"json","external_name":"json","restriction":"JSON::Builder"}],"visibility":"Public","body":"json.object do\n  json.field(\"from\", from.to_s)\n  json.field(\"to\", to.to_s)\n  json.field(\"value\", value)\nend"},"external_var":false},{"html_id":"to_s(io:IO):Nil-instance-method","name":"to_s","doc":"Same as `#inspect(io)`.","summary":"<p>Same as <code>#inspect(io)</code>.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/money/currency/rate.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate.cr#L3"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"((((io << from) << \" -> \") << to) << \": \") << value"},"external_var":false},{"html_id":"value:BigDecimal-instance-method","name":"value","abstract":false,"def":{"name":"value","return_type":"BigDecimal","visibility":"Public","body":"@value"},"external_var":false}]},{"html_id":"money/Money/Currency/RateStore","path":"Money/Currency/RateStore.html","kind":"class","full_name":"Money::Currency::RateStore","name":"RateStore","abstract":true,"superclass":{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"money/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/currency/rate_store.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"money/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"subclasses":[{"html_id":"money/Money/Currency/RateStore/Memory","kind":"class","full_name":"Money::Currency::RateStore::Memory","name":"Memory"}],"namespace":{"html_id":"money/Money/Currency","kind":"class","full_name":"Money::Currency","name":"Currency"},"instance_methods":[{"html_id":"<<(rate:Rate):self-instance-method","name":"<<","doc":"Registers a conversion rate.\n\n```\nstore = Money::Currency::RateStore::Memory.new\nstore << Rate.new(\n  Money::Currency.find(\"USD\"),\n  Money::Currency.find(\"CAD\"),\n  1.24515.to_big_d\n)\nstore << Rate.new(\n  Money::Currency.find(\"CAD\"),\n  Money::Currency.find(\"USD\"),\n  0.803115.to_big_d\n)\n```","summary":"<p>Registers a conversion rate.</p>","abstract":false,"args":[{"name":"rate","external_name":"rate","restriction":"Rate"}],"args_string":"(rate : Rate) : self","args_html":"(rate : <a href=\"../../Money/Currency/Rate.html\">Rate</a>) : <span class=\"k\">self</span>","location":{"filename":"src/money/currency/rate_store.cr","line_number":53,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L53"},"def":{"name":"<<","args":[{"name":"rate","external_name":"rate","restriction":"Rate"}],"return_type":"self","visibility":"Public","body":"transaction(mutable: true) do\n  set_rate(rate)\nend\nself\n"},"external_var":false},{"html_id":"<<(rates:Enumerable(Rate)):self-instance-method","name":"<<","doc":"Registers multiple conversion rates.\n\n```\nstore = Money::Currency::RateStore::Memory.new\nstore << [\n  Rate.new(\n    Money::Currency.find(\"USD\"),\n    Money::Currency.find(\"CAD\"),\n    1.24515.to_big_d\n  ),\n  Rate.new(\n    Money::Currency.find(\"CAD\"),\n    Money::Currency.find(\"USD\"),\n    0.803115.to_big_d\n  ),\n]\n```","summary":"<p>Registers multiple conversion rates.</p>","abstract":false,"args":[{"name":"rates","external_name":"rates","restriction":"Enumerable(Rate)"}],"args_string":"(rates : Enumerable(Rate)) : self","args_html":"(rates : Enumerable(<a href=\"../../Money/Currency/Rate.html\">Rate</a>)) : <span class=\"k\">self</span>","location":{"filename":"src/money/currency/rate_store.cr","line_number":77,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L77"},"def":{"name":"<<","args":[{"name":"rates","external_name":"rates","restriction":"Enumerable(Rate)"}],"return_type":"self","visibility":"Public","body":"transaction(mutable: true) do\n  set_rates(rates)\nend\nself\n"},"external_var":false},{"html_id":"[](from:String|Symbol|Currency,to:String|Symbol|Currency):BigDecimal-instance-method","name":"[]","doc":"Retrieves the rate for the given currency pair or raises\n`UnknownRateError` if not found.\n\n```\nstore = Money::Currency::RateStore::Memory.new\nstore[\"USD\", \"CAD\"] = 1.24515\n\nstore[\"USD\", \"CAD\"] # => 1.24515\nstore[\"CAD\", \"USD\"] # raises UnknownRateError\n```","summary":"<p>Retrieves the rate for the given currency pair or raises <code><a href=\"../../Money/UnknownRateError.html\">UnknownRateError</a></code> if not found.</p>","abstract":false,"args":[{"name":"from","external_name":"from","restriction":"String | Symbol | Currency"},{"name":"to","external_name":"to","restriction":"String | Symbol | Currency"}],"args_string":"(from : String | Symbol | Currency, to : String | Symbol | Currency) : BigDecimal","args_html":"(from : String | Symbol | <a href=\"../../Money/Currency.html\">Currency</a>, to : String | Symbol | <a href=\"../../Money/Currency.html\">Currency</a>) : <a href=\"../../BigDecimal.html\">BigDecimal</a>","location":{"filename":"src/money/currency/rate_store.cr","line_number":115,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L115"},"def":{"name":"[]","args":[{"name":"from","external_name":"from","restriction":"String | Symbol | Currency"},{"name":"to","external_name":"to","restriction":"String | Symbol | Currency"}],"return_type":"BigDecimal","visibility":"Public","body":"self[from, to]? || (raise(UnknownRateError.new(\"No conversion rate known for #{from} -> #{to}\")))"},"external_var":false},{"html_id":"[]=(from:String|Symbol|Currency,to:String|Symbol|Currency,value:Number):Nil-instance-method","name":"[]=","doc":"Registers a conversion rate.\n\n```\nstore = Money::Currency::RateStore::Memory.new\nstore[\"USD\", \"CAD\"] = 1.24515\nstore[\"CAD\", \"USD\"] = 0.803115\n```","summary":"<p>Registers a conversion rate.</p>","abstract":false,"args":[{"name":"from","external_name":"from","restriction":"String | Symbol | Currency"},{"name":"to","external_name":"to","restriction":"String | Symbol | Currency"},{"name":"value","external_name":"value","restriction":"Number"}],"args_string":"(from : String | Symbol | Currency, to : String | Symbol | Currency, value : Number) : Nil","args_html":"(from : String | Symbol | <a href=\"../../Money/Currency.html\">Currency</a>, to : String | Symbol | <a href=\"../../Money/Currency.html\">Currency</a>, value : Number) : Nil","location":{"filename":"src/money/currency/rate_store.cr","line_number":29,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L29"},"def":{"name":"[]=","args":[{"name":"from","external_name":"from","restriction":"String | Symbol | Currency"},{"name":"to","external_name":"to","restriction":"String | Symbol | Currency"},{"name":"value","external_name":"value","restriction":"Number"}],"return_type":"Nil","visibility":"Public","body":"from, to = Currency.wrap(from), Currency.wrap(to)\n\ntransaction(mutable: true) do\n  set_rate(Rate.new(from, to, value.to_big_d))\nend\n"},"external_var":false},{"html_id":"[]?(from:String|Symbol|Currency,to:String|Symbol|Currency):BigDecimal|Nil-instance-method","name":"[]?","doc":"Retrieves the rate for the given currency pair or `nil` if not found.\n\n```\nstore = Money::Currency::RateStore::Memory.new\nstore[\"USD\", \"CAD\"] = 1.24515\n\nstore[\"USD\", \"CAD\"]? # => 1.24515\nstore[\"CAD\", \"USD\"]? # => nil\n```","summary":"<p>Retrieves the rate for the given currency pair or <code>nil</code> if not found.</p>","abstract":false,"args":[{"name":"from","external_name":"from","restriction":"String | Symbol | Currency"},{"name":"to","external_name":"to","restriction":"String | Symbol | Currency"}],"args_string":"(from : String | Symbol | Currency, to : String | Symbol | Currency) : BigDecimal | Nil","args_html":"(from : String | Symbol | <a href=\"../../Money/Currency.html\">Currency</a>, to : String | Symbol | <a href=\"../../Money/Currency.html\">Currency</a>) : <a href=\"../../BigDecimal.html\">BigDecimal</a> | Nil","location":{"filename":"src/money/currency/rate_store.cr","line_number":96,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L96"},"def":{"name":"[]?","args":[{"name":"from","external_name":"from","restriction":"String | Symbol | Currency"},{"name":"to","external_name":"to","restriction":"String | Symbol | Currency"}],"return_type":"BigDecimal | ::Nil","visibility":"Public","body":"from, to = Currency.wrap(from), Currency.wrap(to)\n\ntransaction do\n  (get_rate?(from, to)).try(&.value)\nend\n"},"external_var":false},{"html_id":"clear(base_currency:String|Symbol|Currency):Nil-instance-method","name":"clear","doc":"Removes rates for the given base currency.","summary":"<p>Removes rates for the given base currency.</p>","abstract":false,"args":[{"name":"base_currency","external_name":"base_currency","restriction":"String | Symbol | Currency"}],"args_string":"(base_currency : String | Symbol | Currency) : Nil","args_html":"(base_currency : String | Symbol | <a href=\"../../Money/Currency.html\">Currency</a>) : Nil","location":{"filename":"src/money/currency/rate_store.cr","line_number":159,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L159"},"def":{"name":"clear","args":[{"name":"base_currency","external_name":"base_currency","restriction":"String | Symbol | Currency"}],"return_type":"Nil","visibility":"Public","body":"transaction(mutable: true) do\n  clear_rates(Currency.wrap(base_currency))\nend"},"external_var":false},{"html_id":"clear:Nil-instance-method","name":"clear","doc":"Empties currency rate index.","summary":"<p>Empties currency rate index.</p>","abstract":false,"location":{"filename":"src/money/currency/rate_store.cr","line_number":149,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L149"},"def":{"name":"clear","return_type":"Nil","visibility":"Public","body":"transaction(mutable: true) do\n  clear_rates\nend"},"external_var":false},{"html_id":"each(&:Rate->_):Nil-instance-method","name":"each","doc":"Iterates over list of `Rate` objects.\n\n```\nstore.each do |rate|\n  puts rate\nend\n```","summary":"<p>Iterates over list of <code><a href=\"../../Money/Currency/Rate.html\">Rate</a></code> objects.</p>","abstract":false,"location":{"filename":"src/money/currency/rate_store.cr","line_number":130,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L130"},"def":{"name":"each","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(Rate -> _)"},"return_type":"Nil","visibility":"Public","body":"transaction do\n  each_rate do |rate|\n    yield rate\n  end\nend"},"external_var":false},{"html_id":"rates:Array(Rate)-instance-method","name":"rates","doc":"Returns list of `Rate` objects.","summary":"<p>Returns list of <code><a href=\"../../Money/Currency/Rate.html\">Rate</a></code> objects.</p>","abstract":false,"location":{"filename":"src/money/currency/rate_store.cr","line_number":137,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L137"},"def":{"name":"rates","return_type":"Array(Rate)","visibility":"Public","body":"transaction do\n  rates = [] of Rate\n  each_rate do |rate|\n    rates << rate\n  end\n  rates\nend"},"external_var":false},{"html_id":"transaction(*,mutable:Bool=false,&:->_)-instance-method","name":"transaction","doc":"Wraps block execution in a concurrency-safe transaction.","summary":"<p>Wraps block execution in a concurrency-safe transaction.</p>","abstract":false,"args":[{"name":"","external_name":"","restriction":""},{"name":"mutable","default_value":"false","external_name":"mutable","restriction":"Bool"}],"args_string":"(*, mutable : Bool = false, & :  -> _)","args_html":"(*, mutable : Bool = <span class=\"n\">false</span>, & :  -> _)","location":{"filename":"src/money/currency/rate_store.cr","line_number":8,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store.cr#L8"},"def":{"name":"transaction","args":[{"name":"","external_name":"","restriction":""},{"name":"mutable","default_value":"false","external_name":"mutable","restriction":"Bool"}],"splat_index":0,"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> _)"},"visibility":"Public","body":"@mutex.synchronize do\n  yield\nend"},"external_var":false}],"types":[{"html_id":"money/Money/Currency/RateStore/File","path":"Money/Currency/RateStore/File.html","kind":"class","full_name":"Money::Currency::RateStore::File","name":"File","abstract":false,"superclass":{"html_id":"money/Money/Currency/RateStore/Memory","kind":"class","full_name":"Money::Currency::RateStore::Memory","name":"Memory"},"ancestors":[{"html_id":"money/Money/Currency/RateStore/Memory","kind":"class","full_name":"Money::Currency::RateStore::Memory","name":"Memory"},{"html_id":"money/Money/Currency/RateStore","kind":"class","full_name":"Money::Currency::RateStore","name":"RateStore"},{"html_id":"money/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/currency/rate_store/file.cr","line_number":23,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/file.cr#L23"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money/Currency/RateStore","kind":"class","full_name":"Money::Currency::RateStore","name":"RateStore"},"doc":"Class for storage of exchange rate pairs in a JSON file.\n\nNOTE: Exchange rates are stored in memory and are automatically loaded from\n(upon initialization), and persisted to, a JSON file (on every mutable\ntransaction commit).\n\n```\nstore = Money::Currency::RateStore::File.new(\"path/to/file.json\")\nstore[\"USD\", \"CAD\"] = 0.98\nstore[\"USD\", \"CAD\"] # => 0.98\n\n# Iterates rates\nstore.each do |rate|\n  puts rate\nend\n\n# Save rates\nstore.save\n```","summary":"<p>Class for storage of exchange rate pairs in a JSON file.</p>","constructors":[{"html_id":"new(filepath:Path|String)-class-method","name":"new","abstract":false,"args":[{"name":"filepath","external_name":"filepath","restriction":"Path | String"}],"args_string":"(filepath : Path | String)","args_html":"(filepath : Path | String)","location":{"filename":"src/money/currency/rate_store/file.cr","line_number":24,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/file.cr#L24"},"def":{"name":"new","args":[{"name":"filepath","external_name":"filepath","restriction":"Path | String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(filepath)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"load:Nil-instance-method","name":"load","doc":"Loads rates from a JSON file.","summary":"<p>Loads rates from a JSON file.</p>","abstract":false,"location":{"filename":"src/money/currency/rate_store/file.cr","line_number":38,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/file.cr#L38"},"def":{"name":"load","return_type":"Nil","visibility":"Public","body":"if ::File.exists?(@filepath)\nelse\n  return\nend\n\n::File.open(@filepath) do |file|\n  rates = Array(Rate).from_json(file)\n\n\n\n  transaction do\n    @index = Hash(String, Rate).new(initial_capacity: rates.size)\n    set_rates(rates)\n  end\nend\n"},"external_var":false},{"html_id":"save:Nil-instance-method","name":"save","doc":"Saves rates to a JSON file.","summary":"<p>Saves rates to a JSON file.</p>","abstract":false,"location":{"filename":"src/money/currency/rate_store/file.cr","line_number":54,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/file.cr#L54"},"def":{"name":"save","return_type":"Nil","visibility":"Public","body":"::File.open(@filepath, \"w\") do |file|\n  rates.to_pretty_json(file)\nend"},"external_var":false},{"html_id":"transaction(*,mutable:Bool=false,&:->_)-instance-method","name":"transaction","doc":"Wraps block execution in a concurrency-safe transaction.","summary":"<p>Wraps block execution in a concurrency-safe transaction.</p>","abstract":false,"args":[{"name":"","external_name":"","restriction":""},{"name":"mutable","default_value":"false","external_name":"mutable","restriction":"Bool"}],"args_string":"(*, mutable : Bool = false, & :  -> _)","args_html":"(*, mutable : Bool = <span class=\"n\">false</span>, & :  -> _)","location":{"filename":"src/money/currency/rate_store/file.cr","line_number":29,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/file.cr#L29"},"def":{"name":"transaction","args":[{"name":"","external_name":"","restriction":""},{"name":"mutable","default_value":"false","external_name":"mutable","restriction":"Bool"}],"splat_index":0,"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> _)"},"visibility":"Public","body":"super(mutable: mutable) do\n  (yield).tap do\n    if mutable\n      save\n    end\n  end\nend"},"external_var":false}]},{"html_id":"money/Money/Currency/RateStore/Memory","path":"Money/Currency/RateStore/Memory.html","kind":"class","full_name":"Money::Currency::RateStore::Memory","name":"Memory","abstract":false,"superclass":{"html_id":"money/Money/Currency/RateStore","kind":"class","full_name":"Money::Currency::RateStore","name":"RateStore"},"ancestors":[{"html_id":"money/Money/Currency/RateStore","kind":"class","full_name":"Money::Currency::RateStore","name":"RateStore"},{"html_id":"money/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/currency/rate_store/memory.cr","line_number":15,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/currency/rate_store/memory.cr#L15"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"money/Money/Currency/RateStore/File","kind":"class","full_name":"Money::Currency::RateStore::File","name":"File"}],"namespace":{"html_id":"money/Money/Currency/RateStore","kind":"class","full_name":"Money::Currency::RateStore","name":"RateStore"},"doc":"Class for concurrency-safe storage of exchange rate pairs.\nUsed by instances of `Currency::VariableExchange`.\n\n```\nstore = Money::Currency::RateStore::Memory.new\nstore[\"USD\", \"CAD\"] = 0.98\nstore[\"USD\", \"CAD\"] # => 0.98\n\n# Iterates rates\nstore.each do |rate|\n  puts rate\nend\n```","summary":"<p>Class for concurrency-safe storage of exchange rate pairs.</p>"}]}]},{"html_id":"money/Money/DifferentCurrencyError","path":"Money/DifferentCurrencyError.html","kind":"class","full_name":"Money::DifferentCurrencyError","name":"DifferentCurrencyError","abstract":false,"superclass":{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},"ancestors":[{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},{"html_id":"money/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/error.cr","line_number":15,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/error.cr#L15"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"doc":"Raised by `Bank::SingleCurrency` when trying to exchange currencies.","summary":"<p>Raised by <code><a href=\"../Money/Bank/SingleCurrency.html\">Bank::SingleCurrency</a></code> when trying to exchange currencies.</p>"},{"html_id":"money/Money/Error","path":"Money/Error.html","kind":"class","full_name":"Money::Error","name":"Error","abstract":false,"superclass":{"html_id":"money/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"money/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/error.cr","line_number":3,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/error.cr#L3"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"money/Money/DifferentCurrencyError","kind":"class","full_name":"Money::DifferentCurrencyError","name":"DifferentCurrencyError"},{"html_id":"money/Money/Parse/Error","kind":"class","full_name":"Money::Parse::Error","name":"Error"},{"html_id":"money/Money/UndefinedSmallestDenominationError","kind":"class","full_name":"Money::UndefinedSmallestDenominationError","name":"UndefinedSmallestDenominationError"},{"html_id":"money/Money/UnknownCurrencyError","kind":"class","full_name":"Money::UnknownCurrencyError","name":"UnknownCurrencyError"},{"html_id":"money/Money/UnknownRateError","kind":"class","full_name":"Money::UnknownRateError","name":"UnknownRateError"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"doc":"Base exception class.","summary":"<p>Base exception class.</p>"},{"html_id":"money/Money/Exchange","path":"Money/Exchange.html","kind":"module","full_name":"Money::Exchange","name":"Exchange","abstract":false,"locations":[{"filename":"src/money/money/exchange.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/exchange.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"instance_methods":[{"html_id":"exchange_to(other_currency:String|Symbol|Currency):Money-instance-method","name":"exchange_to","doc":"Exchanges `self` to a new `Money` object in *other_currency*.","summary":"<p>Exchanges <code>self</code> to a new <code><a href=\"../Money.html\">Money</a></code> object in <em>other_currency</em>.</p>","abstract":false,"args":[{"name":"other_currency","external_name":"other_currency","restriction":"String | Symbol | Currency"}],"args_string":"(other_currency : String | Symbol | Currency) : Money","args_html":"(other_currency : String | Symbol | <a href=\"../Money/Currency.html\">Currency</a>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/exchange.cr","line_number":4,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/exchange.cr#L4"},"def":{"name":"exchange_to","args":[{"name":"other_currency","external_name":"other_currency","restriction":"String | Symbol | Currency"}],"return_type":"Money","visibility":"Public","body":"other_currency = Currency.wrap(other_currency)\ncase\nwhen other_currency == currency\n  self\nwhen zero?\n  with_currency(other_currency)\nelse\n  bank.exchange(self, other_currency)\nend\n"},"external_var":false},{"html_id":"with_same_currency(other:Money,&)-instance-method","name":"with_same_currency","doc":"Yields *other* `Money` object exchanged to `self.currency`.","summary":"<p>Yields <em>other</em> <code><a href=\"../Money.html\">Money</a></code> object exchanged to <code>self.currency</code>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Money"}],"args_string":"(other : Money, &)","args_html":"(other : <a href=\"../Money.html\">Money</a>, &)","location":{"filename":"src/money/money/exchange.cr","line_number":17,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/exchange.cr#L17"},"def":{"name":"with_same_currency","args":[{"name":"other","external_name":"other","restriction":"Money"}],"yields":1,"block_arity":1,"visibility":"Public","body":"yield other.exchange_to(currency)"},"external_var":false}]},{"html_id":"money/Money/Formatting","path":"Money/Formatting.html","kind":"module","full_name":"Money::Formatting","name":"Formatting","abstract":false,"locations":[{"filename":"src/money/money/formatting.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/formatting.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"}],"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"instance_methods":[{"html_id":"format(options:NamedTuple):String-instance-method","name":"format","doc":"Creates a formatted price string according to several rules.\n\n**display_free** (`Bool | String`) — default: `false`\n\nWhether a zero amount of money should be formatted as the supplied string.\n\n```\nMoney.us_dollar(0).format(display_free: \"gratis\") # => \"gratis\"\nMoney.us_dollar(0).format                         # => \"$0.00\"\n```\n\n**sign_positive** (`Bool`) — default: `false`\n\nWhether positive numbers should be signed, too.\n\n```\n# You can specify to display the sign with positive numbers\nMoney.new(100, \"GBP\").format(sign_positive: true) # => \"+£1.00\"\nMoney.new(100, \"GBP\").format                      # => \"£1.00\"\n```\n\n**with_currency** (`Bool`) — default: `false`\n\nWhether the currency name should be appended to the result string.\n\n```\nMoney.us_dollar(100).format                      # => \"$1.00\"\nMoney.us_dollar(100).format(with_currency: true) # => \"$1.00 USD\"\nMoney.us_dollar(85).format(with_currency: true)  # => \"$0.85 USD\"\n```\n\n**no_cents** (`Bool`) — default: `false`\n\nWhether cents should be omitted.\n\n```\nMoney.us_dollar(100).format(no_cents: true) # => \"$1\"\nMoney.us_dollar(599).format(no_cents: true) # => \"$5\"\n```\n\n**no_cents_if_whole** (`Bool`) — default: `false`\n\nWhether cents should be omitted if the cent value is zero.\n\n```\nMoney.us_dollar(10000).format(no_cents_if_whole: true) # => \"$100\"\nMoney.us_dollar(10034).format(no_cents_if_whole: true) # => \"$100.34\"\n```\n\n**drop_trailing_zeros** (`Bool`) — default: `false`\n\n```\nMoney.new(89000, :btc).format(drop_trailing_zeros: true) # => ฿0.00089\nMoney.new(110, :usd).format(drop_trailing_zeros: true)   # => $1.1\n```\n\n**symbol_first** (`Bool`) — default: `false`\n\nWhether a money symbol should go before the amount.\n\n```\nMoney.new(10000, \"USD\").format(symbol_first: true)  # => \"$100.00\"\nMoney.new(10000, \"USD\").format(symbol_first: false) # => \"100.00 $\"\n```\n\n**symbol** (`Bool | String`) — default: `true`\n\nWhether a money symbol should be prepended to the result string.\nThis method attempts to pick a symbol that's suitable for the given currency.\n\n```\nMoney.new(100, \"USD\") # => \"$1.00\"\nMoney.new(100, \"GBP\") # => \"£1.00\"\nMoney.new(100, \"EUR\") # => \"€1.00\"\n\n# Same thing.\nMoney.new(100, \"USD\").format(symbol: true) # => \"$1.00\"\nMoney.new(100, \"GBP\").format(symbol: true) # => \"£1.00\"\nMoney.new(100, \"EUR\").format(symbol: true) # => \"€1.00\"\n\n# You can pass `false` or an empty string to disable\n# prepending a money symbol.\nMoney.new(100, \"USD\").format(symbol: false) # => \"1.00\"\nMoney.new(100, \"GBP\").format(symbol: nil)   # => \"1.00\"\nMoney.new(100, \"EUR\").format(symbol: \"\")    # => \"1.00\"\n\n# If the symbol for the given currency isn't known, then it will default\n# to \"¤\" as symbol.\nMoney.new(100, \"XBC\").format(symbol: true) # => \"1.00 ¤\"\n\n# You can specify a string as value to enforce using a particular symbol.\nMoney.new(100, \"XBC\").format(symbol: \"ƒ\") # => \"1.00 ƒ\"\n```\n\n**disambiguate** (`Bool`) — default: `false`\n\nPrevents the result from being ambiguous due to equal symbols for different currencies.\nUses the `disambiguate_symbol`.\n\n```\nMoney.new(100, \"USD\").format(disambiguate: false) # => \"$100.00\"\nMoney.new(100, \"CAD\").format(disambiguate: false) # => \"$100.00\"\nMoney.new(100, \"USD\").format(disambiguate: true)  # => \"US$100.00\"\nMoney.new(100, \"CAD\").format(disambiguate: true)  # => \"C$100.00\"\n```\n\n**symbol_before_without_space** (`Bool`) — default: `true`\n\nWhether a space between the money symbol and the amount should be inserted\nwhen `:symbol_first` is `true`. The default is `true` (meaning no space).\nIgnored if `:symbol` is `false` or `:symbol_first` is `false`.\n\n```\n# Default is to not insert a space.\nMoney.new(100, \"USD\").format # => \"$1.00\"\n\n# Same thing.\nMoney.new(100, \"USD\").format(symbol_before_without_space: true) # => \"$1.00\"\n\n# If set to false, will insert a space.\nMoney.new(100, \"USD\").format(symbol_before_without_space: false) # => \"$ 1.00\"\n```\n\n**symbol_after_without_space** (`Bool`) — default: `false`\n\nWhether a space between the amount and the money symbol should be inserted\nwhen `:symbol_first` is `false`. The default is `false` (meaning space).\nIgnored if `:symbol` is `false` or `:symbol_first` is `true`.\n\n```\n# Default is to insert a space.\nMoney.new(100, \"USD\").format(symbol_first: false) # => \"1.00 $\"\n\n# If set to true, will not insert a space.\nMoney.new(100, \"USD\").format(symbol_first: false, symbol_after_without_space: true) # => \"1.00$\"\n```\n\n**separator** (`Bool | String`) — default: `true`\n\nWhether the currency should be separated by the specified character or \".\".\n\n```\n# If a string is specified, it's value is used.\nMoney.new(100, \"USD\").format(separator: \",\") # => \"$1,00\"\n\n# If the separator for a given currency isn't known, then it will default\n# to \".\" as separator.\nMoney.new(100, \"FOO\").format # => \"$1.00\"\n```\n\n**delimiter** (`Bool | String`) — default: `true`\n\nWhether the currency should be delimited by the specified character or \",\".\n\n```\n# If falsy value is specified, no delimiter is used.\nMoney.new(100000, \"USD\").format(delimiter: false) # => \"1000.00\"\nMoney.new(100000, \"USD\").format(delimiter: nil)   # => \"1000.00\"\nMoney.new(100000, \"USD\").format(delimiter: \"\")    # => \"1000.00\"\n\n# If a string is specified, it's value is used.\nMoney.new(100000, \"USD\").format(delimiter: \".\") # => \"$1.000.00\"\n\n# If the delimiter for a given currency isn't known, then it will\n# default to \",\" as delimiter.\nMoney.new(100000, \"FOO\").format # => \"$1,000.00\"\n```\n\n**html** (`Bool`) — default: `false`\n\nWhether the currency should be HTML-formatted.\n\n```\nMoney.new(1999, \"RUB\").format(html: true, no_cents: true) # => \"19 &#x20BD;\"\n```","summary":"<p>Creates a formatted price string according to several rules.</p>","abstract":false,"args":[{"name":"options","external_name":"options","restriction":"NamedTuple"}],"args_string":"(options : NamedTuple) : String","args_html":"(options : NamedTuple) : String","location":{"filename":"src/money/money/formatting.cr","line_number":180,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/formatting.cr#L180"},"def":{"name":"format","args":[{"name":"options","external_name":"options","restriction":"NamedTuple"}],"return_type":"String","visibility":"Public","body":"default_options = {display_free: false, sign_positive: false, with_currency: false, html: false, no_cents: false, no_cents_if_whole: false, drop_trailing_zeros: false, disambiguate: false, symbol_before_without_space: true, symbol_after_without_space: false, symbol_first: currency.symbol_first? || false, separator: currency.decimal_mark || \".\", delimiter: currency.thousands_separator || \",\"}\noptions = default_options.merge(options)\n\n{% for key in [:separator, :delimiter] of ::Symbol %}\n        if options[{{ key }}] === true\n          options = options.merge {{ key.id }}: default_options[{{ key }}]\n        end\n      {% end %}\n\nif zero?\n  display_free = options[:display_free]\n  if display_free.is_a?(String)\n    return display_free\n  end\nend\n\nparts = amount.abs.to_s(scientific_notation: false).split('.')\nunit, subunit = parts[0], parts[1]?\nif subunit == \"0\"\n  subunit = nil\nend\n\nformatted = unit\n\ndelimiter = options[:delimiter]\nif delimiter\n  formatted = formatted.gsub(DELIMITER_REGEX) do |digit_to_delimit|\n    \"#{digit_to_delimit}#{delimiter}\"\n  end\nend\n\ndisplay_cents = true\nif options[:no_cents] || (options[:no_cents_if_whole] && !subunit)\n  display_cents = false\nend\n\ndecimal_places = currency.decimal_places\nif display_cents && decimal_places > 0\n  subunit = subunit.to_s.ljust(decimal_places, '0')\n  if options[:drop_trailing_zeros]\n    subunit = subunit.rstrip('0')\n  end\n  if subunit.empty?\n  else\n    formatted = formatted + \"#{options[:separator]}#{subunit}\"\n  end\nend\n\nsign = negative? ? '-' : (options[:sign_positive] && positive?) ? '+' : nil\n\ndefault_symbol = if options[:disambiguate] && currency.disambiguate_symbol\n  currency.disambiguate_symbol\nelse\n  currency.symbol || \"¤\"\nend\n\nsymbol = case\nwhen options[:html] && currency.html_entity\n  currency.html_entity\nwhen options.has_key?(:symbol)\n  case options[:symbol]?\n  when true\n    default_symbol\n  when String\n    options[:symbol]?\n  end\nelse\n  default_symbol\nend\nif symbol.is_a?(String) && !symbol.empty?\n  if options[:symbol_first]\n    symbol_space = options[:symbol_before_without_space] ? nil : ' '\n    formatted = \"#{sign}#{symbol}#{symbol_space}#{formatted}\"\n  else\n    symbol_space = options[:symbol_after_without_space] ? nil : ' '\n    formatted = \"#{sign}#{formatted}#{symbol_space}#{symbol}\"\n  end\nelse\n  formatted = \"#{sign}#{formatted}\"\nend\n\nif options[:with_currency]\n  formatted = formatted + \" #{currency}\"\nend\nformatted\n"},"external_var":false},{"html_id":"to_s(io:IO):Nil-instance-method","name":"to_s","doc":"See also `#format`.","summary":"<p>See also <code><a href=\"../Money/Formatting.html#format%28options%3ANamedTuple%29%3AString-instance-method\">#format</a></code>.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/money/money/formatting.cr","line_number":284,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/formatting.cr#L284"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"io << format"},"external_var":false}]},{"html_id":"money/Money/Parse","path":"Money/Parse.html","kind":"module","full_name":"Money::Parse","name":"Parse","abstract":false,"locations":[{"filename":"src/money/money/parse.cr","line_number":2,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/parse.cr#L2"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"instance_methods":[{"html_id":"parse(str:String,allow_ambiguous=true):Money-instance-method","name":"parse","doc":"Creates a `Money` instance from a string.","summary":"<p>Creates a <code><a href=\"../Money.html\">Money</a></code> instance from a string.</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"},{"name":"allow_ambiguous","default_value":"true","external_name":"allow_ambiguous","restriction":""}],"args_string":"(str : String, allow_ambiguous = true) : Money","args_html":"(str : String, allow_ambiguous = <span class=\"n\">true</span>) : <a href=\"../Money.html\">Money</a>","location":{"filename":"src/money/money/parse.cr","line_number":15,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/parse.cr#L15"},"def":{"name":"parse","args":[{"name":"str","external_name":"str","restriction":"String"},{"name":"allow_ambiguous","default_value":"true","external_name":"allow_ambiguous","restriction":""}],"return_type":"Money","visibility":"Public","body":"parse(str, allow_ambiguous) do |ex|\n  raise(ex)\nend"},"external_var":false},{"html_id":"parse?(str:String,allow_ambiguous=true):Money|Nil-instance-method","name":"parse?","doc":"Creates a `Money` instance from a string, or returns `nil` on failure.","summary":"<p>Creates a <code><a href=\"../Money.html\">Money</a></code> instance from a string, or returns <code>nil</code> on failure.</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"},{"name":"allow_ambiguous","default_value":"true","external_name":"allow_ambiguous","restriction":""}],"args_string":"(str : String, allow_ambiguous = true) : Money | Nil","args_html":"(str : String, allow_ambiguous = <span class=\"n\">true</span>) : <a href=\"../Money.html\">Money</a> | Nil","location":{"filename":"src/money/money/parse.cr","line_number":20,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/parse.cr#L20"},"def":{"name":"parse?","args":[{"name":"str","external_name":"str","restriction":"String"},{"name":"allow_ambiguous","default_value":"true","external_name":"allow_ambiguous","restriction":""}],"return_type":"Money | ::Nil","visibility":"Public","body":"parse(str, allow_ambiguous) do\n  nil\nend"},"external_var":false}],"types":[{"html_id":"money/Money/Parse/Error","path":"Money/Parse/Error.html","kind":"class","full_name":"Money::Parse::Error","name":"Error","abstract":false,"superclass":{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},"ancestors":[{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},{"html_id":"money/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/money/parse.cr","line_number":4,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/money/parse.cr#L4"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money/Parse","kind":"module","full_name":"Money::Parse","name":"Parse"},"doc":"Exception class for parse errors.","summary":"<p>Exception class for parse errors.</p>"}]},{"html_id":"money/Money/UndefinedSmallestDenominationError","path":"Money/UndefinedSmallestDenominationError.html","kind":"class","full_name":"Money::UndefinedSmallestDenominationError","name":"UndefinedSmallestDenominationError","abstract":false,"superclass":{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},"ancestors":[{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},{"html_id":"money/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/error.cr","line_number":19,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/error.cr#L19"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"doc":"Raised when smallest denomination of a currency is not defined.","summary":"<p>Raised when smallest denomination of a currency is not defined.</p>","constructors":[{"html_id":"new(message=\"Smallestdenominationofthiscurrencyisnotdefined\")-class-method","name":"new","abstract":false,"args":[{"name":"message","default_value":"\"Smallest denomination of this currency is not defined\"","external_name":"message","restriction":""}],"args_string":"(message = \"Smallest denomination of this currency is not defined\")","args_html":"(message = <span class=\"s\">&quot;Smallest denomination of this currency is not defined&quot;</span>)","location":{"filename":"src/money/error.cr","line_number":20,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/error.cr#L20"},"def":{"name":"new","args":[{"name":"message","default_value":"\"Smallest denomination of this currency is not defined\"","external_name":"message","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}]},{"html_id":"money/Money/UnknownCurrencyError","path":"Money/UnknownCurrencyError.html","kind":"class","full_name":"Money::UnknownCurrencyError","name":"UnknownCurrencyError","abstract":false,"superclass":{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},"ancestors":[{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},{"html_id":"money/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/error.cr","line_number":7,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/error.cr#L7"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"doc":"Raised when trying to find an unknown currency.","summary":"<p>Raised when trying to find an unknown currency.</p>"},{"html_id":"money/Money/UnknownRateError","path":"Money/UnknownRateError.html","kind":"class","full_name":"Money::UnknownRateError","name":"UnknownRateError","abstract":false,"superclass":{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},"ancestors":[{"html_id":"money/Money/Error","kind":"class","full_name":"Money::Error","name":"Error"},{"html_id":"money/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"money/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"money/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/money/error.cr","line_number":11,"url":"https://github.com/crystal-money/money/blob/7236287/src/money/error.cr#L11"}],"repository_name":"money","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"money/Money","kind":"struct","full_name":"Money","name":"Money"},"doc":"Raised when trying to find an unknown exchange rate.","summary":"<p>Raised when trying to find an unknown exchange rate.</p>"}]}]}})